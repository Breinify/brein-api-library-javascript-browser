(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("recommendations")){let u=Breinify.UTL._jquery(),e=Breinify.plugins._overload(),c={marker:{container:"brrc-cont",item:"brrc-item",data:"recommendation"},splitTest:{defaultGroup:"Breinify",defaultTestGroup:"Breinify",defaultControlGroup:"Control",defaultGroupType:"none",testGroupType:"test",controlGroupType:"control"},_process:function(e,...t){return!!u.isFunction(e)&&(e(...t),!0)},_determineSelector:function(e,t){return null===(e=u.isFunction(e)?e(t):e)?null:"string"==typeof e?u(e):e instanceof u?e:null},_appendContainer:function(n,i,a){if(u.isPlainObject(n)&&u.isPlainObject(n.position)){let e=null,t=null;if(null!==n.position.before)t=n.position.before,e="before";else if(null!==n.position.after)t=n.position.after,e="after";else if(null!==n.position.append)t=n.position.append,e="append";else if(null!==n.position.prepend)t=n.position.prepend,e="prepend";else if(null!==n.position.replace)t=n.position.replace,e="replaceWith";else if(null!==n.position.externalRender)return void this._applyExternalRender(n,i,function(e,t){a(e,u.extend(!0,{error:!1,externalRendering:!0,itemSelection:null},t))});var r,o=this._determineSelector(t);null===o?a(null,{error:!0,errorDescription:"unable to find anchor",externalRendering:!1}):null===(r=this._determineSelector(n.templates.container))?a(null,{error:!0,errorDescription:"unable to find container",externalRendering:!1}):(this._replacePlaceholders(r,i,n),u.isFunction(o[e])?(o[e](r),a(r,{error:!1,externalRendering:!1})):a(null,{error:!0,errorDescription:"unable to apply method to anchor",externalRendering:!1}))}else a(null,{error:!0,errorDescription:"missing position",externalRendering:!1})},_applyExternalRender:function(e,t,n){u.isFunction(e.position.externalRender)?e.position.externalRender(t,n):n(null)},_appendItems:function(i,e,a){let r=this,o=this._determineSelector(a.templates.item,i);if(null===o)return null;u.each(e.recommendations,function(e,t){var n=r._replacePlaceholders(o.clone(!1),t,a);r._setupItemData(n,e,t),i.append(n),r._process(a.process.attachedItem,i,n,t,a)})},_isItem:function(e){return 1===e.closest("[data-"+this.marker.container+'="true"]').length},_setupItemData:function(e,t,n){t="number"==typeof t?t<0?t:t+1:null;e.addClass(this.marker.item).attr("data-"+this.marker.item,"true").data(this.marker.data,u.extend(!0,{widgetPosition:t},n))},_replacePlaceholders:function(n,i,a){let r=this;n.contents().filter(function(){return 3===this.nodeType}).each(function(){var e=u(this),t=r._replace(e.text(),i,a);null!==t&&e.replaceWith(t)});var t=n.get(0).attributes,o={};for(let e=0;e<t.length;e++){var s=t[e],l=r._replace(s.value,i,a);null!==l&&(s.name.startsWith("data-rename-")?o[s.name]={name:s.name.replace("data-rename-",""),value:l}:n.attr(s.name,l))}return u.each(o,function(e,t){n.removeAttr(e),n.attr(t.name,t.value)}),n.children().each(function(){r._replacePlaceholders(u(this),i,a)}),n},_replace:function(e,s,l){let c=this;if("string"!=typeof e||""===e.trim())return null;let d={_counter:0};e=e.replace(/%%([a-zA-Z][a-zA-Z0-9_]*(?:\.[a-zA-Z](?:(?:::)?[a-zA-Z0-9_])*)*|[a-zA-Z][a-zA-Z0-9_-]*(?:::[a-zA-Z][a-zA-Z0-9_-]*)?)%%/g,function(e,t){var n=l.placeholders[t],i=u.isFunction(n)||"string"==typeof n,a=c._readPath(t,s),r=void 0!==a;let o;return null===(o=null===(o=i?"string"==typeof n?n:u.isFunction(n)?n.call(l.placeholders,s,r?a:null):null:r?a:null)&&u.isFunction(l.placeholderSettings.replaceWith)?l.placeholderSettings.replaceWith(t):o)?e:(d._counter++,o)});return 0<d._counter?e:null},_readPath:function(e,t){var n=e.split(".");if(1===n.length)return t[e];let i=t;for(let e=0;e<n.length;e++){if(!u.isPlainObject(i))return null;var a=n[e];i=i[a]}return i}},a={_status:{canceled:"canceled"}},o={meta:{processId:null},recommender:null,activity:{renderType:"renderedRecommendation",clickedType:"clickedRecommendation"},bindings:{selector:"a",specificSelectors:{}},splitTests:{control:{containerSelector:null}},position:{before:null,after:null,prepend:null,append:null,replace:null,externalRender:null},placeholderSettings:{replaceWith:function(e){return""}},placeholders:{"random::uuid":function(){return Breinify.UTL.uuid()},"marker::container":c.marker.container,"marker::item":c.marker.item},templates:{container:null,item:null},process:{stoppedPropagation:function(e){},error:function(e){},canceled:function(){},init:function(e){},pre:function(e,t){},attachedContainer:function(e,t,n,i){},attachedItem:function(e,t,n,i){},attached:function(e,t,n,i){},post:function(e,t,n,i){},finalize:function(e,t,n){},clickedItem:function(e,t){},createActivity:function(e,t){}},data:{modify:function(e,t){return null}}};var t={marker:u.extend(!0,{},c.marker),bind:function(){let r=this,t=Breinify.UTL.uuid();e.overload({Object:function(e){e=u.extend(!0,{},o,e);e.meta.processId=t,r._bindContainer(e)},"Object,Object":function(i,e){let a=u.extend(!0,{},o,e);a.meta.processId=t,r._loadSplitTestSeparately(i,function(e,t){var n=u.isPlainObject(a.recommender)&&u.isPlainObject(a.recommender.payload)?a.recommender.payload:{};if(null===e){let e=200;u.isArray(i.controlGroups)&&u.isPlainObject(t.splitTestData)&&-1<u.inArray(t.splitTestData.groupDecision,i.controlGroups)&&(e=7120),r._bindContainer(a,r._mapResult(n,{additionalData:{splitTestData:t.splitTestData},statusCode:e}))}else{t=r._mapResult(n,{statusCode:400,message:e instanceof Error?e.message:null});c._process(a.process.error,u.extend({name:i.name,result:t},t.status))}})}},arguments,this)},cancel:function(e){a[e]={cancellationTime:(new Date).getTime(),status:a._status.canceled,processId:e}},render:function(){let s=this,l=Breinify.UTL.uuid();return e.overload({Array:function(t){let n={};var i=[];for(let e=0;e<t.length;e++){var a=this._preRenderRecommendations(l,{temporary:t[e]}),r=a.temporary.recommender;if(!u.isPlainObject(r)||!u.isPlainObject(r.payload)||!u.isArray(r.payload.namedRecommendations))return void c._process(a.process.error,{code:-1,error:!0,message:"invalid payload for recommender defined for rendering process",options:a});var o=this._determineName(r.payload,e,t);n[o]=a.temporary,i.push(r.payload)}this._retrieveRecommendations(i,function(e,t){s._renderRecommendations(n,e,t)})},Object:function(e){s.render([e])},"Object,Object":function(e,t){let n=this._preRenderRecommendations(l,t);this._retrieveRecommendations([e],function(e,t){s._renderRecommendations(n,e,t)})},"Array,Object":function(e,t){let n=this._preRenderRecommendations(l,t);this._retrieveRecommendations(e,function(e,t){s._renderRecommendations(n,e,t)})},"String,Object":function(e,t){let n=this._preRenderRecommendations(l,t);this._retrieveRecommendations([{namedRecommendations:[e]}],function(e,t){s._renderRecommendations(n,e,t)})},"String,Object,Object":function(e,t,n){let i=this._preRenderRecommendations(l,n);this._retrieveRecommendations([u.extend({namedRecommendations:[e]},t)],function(e,t){s._renderRecommendations(i,e,t)})}},arguments,this),l},get:function(){e.overload({"Object,Function":function(e,t){this._retrieveRecommendations([e],t)},"Array,Function":function(e,t){this._retrieveRecommendations(e,t)},"String,Function":function(e,t){this._retrieveRecommendations([{namedRecommendations:[e]}],t)},"String,Object,Function":function(e,t,n){this._retrieveRecommendations([u.extend({namedRecommendations:[e]},t)],n)}},arguments,this)},setRecommendationData:function(e,t,n){return!!c._isItem(e)&&(c._setupItemData(e,t,n),!0)},createRecommendationTags:function(e,t,n){var i=this._createDefaultTags(e,n);return this._applyBreinifyTags(i,e,t,n),i},createRenderedRecommendationTags:function(e,t){var n=this.createRecommendationTags(t,{},{});return n.containerAvailable=null===e?null:0<e.length,n.status=Breinify.UTL.toInteger(t.status.code),n.expectedNrOfRecs=u.isPlainObject(t.payload)?Breinify.UTL.toInteger(t.payload.expectedNumberOfRecommendations):null,n.retrievedNrOfRecs=u.isArray(t.recommendations)?t.recommendations.length:0,n.rendered=200===n.status&&0<n.retrievedNrOfRecs&&(null===n.containerAvailable||!0===n.containerAvailable),n},createClickedRecommendationTags:function(e,t,n){return this.createRecommendationTags(e,t,n)},_isCanceled:function(e){let n=(new Date).getTime(),i=[];u.each(a,function(e,t){6e4<n-t.cancellationTime&&i.push(e)});for(let e=0;e<i.length;e++){var t=i[e];delete a[t]}e=a[e];return!!u.isPlainObject(e)&&e.status===a._status.canceled},_loadSplitTestSeparately:function(e,n){var t,i,a;!1===Breinify.plugins._isAdded("splitTests")?n(new Error("please ensure that the split-tests plugin is available when using this feature.")):(t=e.name,i=null===Breinify.UTL.isNonEmptyString(e.token)?e.tokens:e.token,a=null===Breinify.UTL.isNonEmptyString(e.storageKey)?e.storageKeys:e.storageKey,e=u.extend(!0,{splitTestName:e.name},e.payload),Breinify.plugins.splitTests.retrieveSplitTest(t,i,e,a,function(e,t){n(e,t)}))},_bindContainer:function(e,t){let n=this;var t=u.isPlainObject(t)?t:{},i=c._determineSelector(e.templates.container),t=(this._setupContainer(i,e,t),this._applyBindings(e,i),c._determineSelector(e.templates.item,i));null!==t&&t.each(function(e){n.setRecommendationData(u(this),e,{})})},_preRenderRecommendations:function(n,e){let i={};return u.each(e,function(e,t){t=u.extend(!0,{},o,t);t.meta.processId=n,c._process(t.process.init,t),i[e]=t}),i},_renderRecommendations:function(e,n,t){let r=this;null!==n?u.each(e,function(e,t){c._process(t.process.error,n)}):u.each(e,function(e,i){let a=t[e];if(r._isCanceled(i.meta.processId))c._process(i.process.canceled,i,a);else if(u.isPlainObject(a)&&u.isPlainObject(a.status))if(!0===a.status.error)c._process(i.process.error,u.extend({name:e,result:a},a.status));else if(u.isFunction(i.data.modify)){let t=function(t){u.isArray(t)||(t=u.isPlainObject(t)&&u.isPlainObject(t.result)&&u.isPlainObject(t.option)?[t]:[{result:a,option:i}]);for(let e=0;e<t.length;e++){var n=t[e];r._applyRecommendation(n.result,n.option)}};var n=i.data.modify(a,i);u.isFunction(i.data.modify.constructor)&&"AsyncFunction"===i.data.modify.constructor.name&&window.Promise&&n instanceof window.Promise?n.then(e=>t(e)).catch(e=>c._process(i.process.error,{code:-1,error:!0,message:e.message,name:e.name,result:e})):t(n)}else r._applyRecommendation(a,i);else c._process(i.process.error,{code:-1,error:!0,message:"unexpected result-type received",name:e,result:a})})},_handleRender:function(e,t,n){var t=u.extend(!0,{activity:{type:o.activity.renderType}},o,t),i={isControl:u.isPlainObject(e)&&u.isPlainObject(e.splitTestData)&&!0===e.isControl,$recContainer:n,additionalEventData:{},recommendationData:e,option:t};let a={bubbles:!0,cancelable:!1,detail:{}};"function"==typeof window.CustomEvent&&(a=new window.CustomEvent("renderedRecommendation",a)),i.activityTags=this.createRenderedRecommendationTags(n,e),this._sendActivity(t,a,i),this._triggerEvent("renderedRecommendation",i)},_triggerEvent:function(e,t){u(document).trigger(e,t),"function"==typeof window.$&&"function"==typeof window.$.fn&&u!==window.$&&window.$(document).trigger(e,t)},_applyRecommendation:function(t,n){let i=this;var e;!0===t.splitTestData.isControl?(e=i._setupControlContainer(n,t),this._applyBindings(n,e),this._handleRender(t,n,e),c._process(n.process.finalize,n,t,e)):7120===t.status.code?(this._handleRender(t,n,null),c._process(n.process.finalize,n,t,null)):this._renderRecommendation(n,t,function(e){i._applyBindings(n,e),i._handleRender(t,n,e),c._process(n.process.finalize,n,t,e)})},_handleClick:function(e,t,n,i){var a,r=t.closest("."+c.marker.container);1===r.length&&(a=r.data(c.marker.data),u.isPlainObject(a))&&u.isPlainObject(a.option)&&u.isPlainObject(a.data)&&(!0===a.data.splitTestData.isControl?this._handleControlClick(n,t,r,a.data,i,a.option):this._handleRecommendationClick(n,t,r,a.data,i,a.option),!0===i.stopPropagation)&&(n.stopPropagation(),c._process(e.process.stoppedPropagation,n,t,r,a.data,i,a.option))},_handleRecommendationClick:function(e,t,n,i,a,r){var o,t=t.closest("."+c.marker.item);1===t.length&&(o=t.data(c.marker.data),u.isPlainObject(o))&&(t={isControl:!1,$recItem:t,$recContainer:n,additionalEventData:a,recommendationData:i,recommendation:o,option:r},c._process(r.process.clickedItem,e,t),t.activityTags=this.createClickedRecommendationTags(i,o,a),this._sendActivity(r,e,t))},_handleControlClick:function(e,t,n,i,a,r){n={isControl:!0,$controlItem:t,$controlContainer:n,additionalEventData:a,recommendationData:i,option:r},c._process(r.process.clickedItem,e,n),n.activityTags=this._createDefaultTags(i,a),t=t.closest("."+c.marker.item),t=1===t.length?t.data(c.marker.data):null;u.isPlainObject(t)&&this._applyBreinifyTags(n.activityTags,i,t,a),this._sendActivity(r,e,n)},_applyBreinifyTags:function(e,t,n,i){"number"==typeof n.widgetPosition&&(e.widgetPosition=n.widgetPosition,"string"==typeof e.widgetType)&&(e.widgetId=e.widgetType+"-"+e.widgetPosition),"string"==typeof n.id&&("com.brein.common.dto.CustomerAssetsDto"===(t=Breinify.UTL.isNonEmptyString(t?.meta?.type))?(e.recType=t,e.assetIds=[],e.assetIds):("com.brein.common.dto.CustomerProductDto"===t&&(e.recType=t),e.productIds=[],e.productIds)).push(n.id)},_createDefaultTags:function(e,t){var n={},i=u.isPlainObject(e.splitTestData)?e.splitTestData:{active:!1};let a,r;r=!1===i.active?(a=c.splitTest.defaultGroupType,c.splitTest.defaultGroup):!0===i.isControl?(a=c.splitTest.controlGroupType,"string"==typeof i.groupDecision&&""!==i.groupDecision.trim()?i.groupDecision:c.splitTest.defaultControlGroup):(a=c.splitTest.testGroupType,"string"==typeof i.groupDecision&&""!==i.groupDecision.trim()?i.groupDecision:c.splitTest.defaultTestGroup);var o="string"==typeof i.testName&&""!==i.testName.trim()?i.testName:null,i="string"==typeof i.selectedInstance&&""!==i.selectedInstance.trim()?i.selectedInstance:null,o=(n.group=r,n.groupType=a,n.splitTest=null===o?null:o+(null===i?"":" ("+i+")"),u.isPlainObject(e.payload)?e.payload:{}),i="string"==typeof o.queryName&&""!==o.queryName.trim()?o.queryName:null,e="string"==typeof o.recommenderName&&""!==o.recommenderName.trim()?o.recommenderName:null;return n.widgetType=e,n.widgetLabel=null===i?e:i,n},_sendActivity:function(e,t,n){var i=t.metaKey||t.ctrlKey||2===t.which,a=(t.data?.actualTarget??t.target)instanceof HTMLAnchorElement,r=null===(r=Breinify.UTL.isNonEmptyString(e.activity.type))?e.activity.clickedType:r;if(n=u.extend(!0,{additionalEventData:{meta:{openInNewTab:i,willReloadPage:a},sendActivities:!0,scheduleActivities:null},activityType:r,activityTags:{},activityUser:{}},n),c._process(e.process.createActivity,t,n),!1!==n.additionalEventData.sendActivities){"number"==typeof n.activityTags.widgetPosition&&"string"==typeof n.activityTags.widgetType&&"string"!=typeof n.activityTags.widgetId&&(n.activityTags.widgetId=n.activityTags.widgetType+"-"+n.activityTags.widgetPosition);let e=null;null===n.additionalEventData.scheduleActivities?e=!1!=a&&!0!==i:"boolean"==typeof n.additionalEventData.scheduleActivities&&(e=n.additionalEventData.scheduleActivities),u.isPlainObject(Breinify.plugins.activities)&&(!0===e?Breinify.plugins.activities.scheduleDelayedActivity(n.activityUser,n.activityType,n.activityTags,6e4):!1===e&&Breinify.plugins.activities.generic(n.activityType,n.activityUser,n.activityTags))}},_applyBindings:function(n,i){let a=this;Breinify.UTL.dom.addClickObserver(n.bindings.selector,"clickedRecommendations",function(e,t){a._handleClick(n,u(this),e,t)});var r=n.bindings.specificSelectors;if(u.isPlainObject(r)&&null!==i){var o=Object.keys(r);for(let e=0;e<o.length;e++){var s=o[e],l=r[s];let t=u.isPlainObject(l)?l:{};i.find(s).on("click",function(e){a._handleClick(n,u(this),e,t)})}}},_setupControlContainer:function(e,t){var n=c._determineSelector(e.splitTests.control.containerSelector);return null===n?null:this._setupContainer(n,e,t)},_setupContainer:function(e,t,n){return e.hasClass(c.marker.container)||e.addClass(c.marker.container),e.attr("data-"+c.marker.container,"true").data(c.marker.data,{option:t,data:n})},_renderRecommendation:function(i,r,o){let s=this;c._process(i.process.pre,r,i),c._appendContainer(i,r,function(e,t){if(null===e||!0===t.error)o(null,t);else{let a=e.find("."+c.marker.container);if(0===a.length&&(a=e).addClass(c.marker.container),a=s._setupContainer(a,i,r),c._process(i.process.attachedContainer,e,a,r,i),!0===t.externalRendering){let i=u.isFunction(t.itemSelection)?t.itemSelection:function(e,t){return e.children().eq(t)};u.each(r.recommendations,function(e,t){var n=i(a,e,t);n instanceof u&&1===n.length&&c._setupItemData(n,e,t)})}else c._appendItems(a,r,i),c._process(i.process.attached,e,a,r,i);var n=c._determineSelector(i.splitTests.control.containerSelector);null!==n&&1===n.length&&n.get(0)!==e.get(0)&&0===n.find(".brrc-item").length&&n.hide(),c._process(i.process.post,e,a,r,i),o(e,t)}})},_retrieveRecommendations:function(n,i){let a=this;if(u.isArray(n))for(let e=0;e<n.length;e++)n[e].recommendationPlugin=!0;Breinify.recommendation({},n,function(e,t){"string"==typeof t?i(new Error(t)):u.isArray(e.results)?(t=a._mapResults(n,e.results),i(null,t)):i(new Error("Invalid response received."))})},_mapResult:function(e,t){var n={};this._determineErrorResponse(t,n)||this._determineSplitTestData(t,n)||this._determineRecommendationData(t,n),this._determineAdditionalData(t,n),this._determineMetaData(t,n);let i=null,a=("number"==typeof e.numRecommendations&&0<e.numRecommendations&&(i=e.numRecommendations),null),r=("string"==typeof e.recommendationQueryName&&""!==e.recommendationQueryName.trim()&&(a=e.recommendationQueryName),null);u.isPlainObject(e)&&u.isArray(e.namedRecommendations)&&1===e.namedRecommendations.length&&(r=e.namedRecommendations[0]);t=u.isArray(e.recommendationForItems)&&0<e.recommendationForItems.length;return n.payload={recommenderName:r,queryName:a,isForItems:t,expectedNumberOfRecommendations:i},n},_mapResults:function(t,n){var i={};for(let e=0;e<n.length;e++){var a=e<t.length&&u.isPlainObject(t[e])?t[e]:{},r=n[e],r=this._mapResult(a,r),a=(u.isPlainObject(r.payload)||(r.payload={}),this._determineName(a,e,t));i[r.payload.name=a]=r}return i},_determineErrorResponse:function(e,t){return u.isPlainObject(e)?(200===e.statusCode||7120===e.statusCode?t.status={code:e.statusCode,message:e.message,error:!1}:t.status={error:!0,code:e.statusCode,message:e.message},t.status.error):(t.status={error:!0,code:500,message:"invalid result type received"},!0)},_determineRecommendationType:function(e){let t="com.brein.common.dto.CustomerProductDto";return t=u.isPlainObject(e)&&u.isPlainObject(e.additionalData)&&u.isPlainObject(e.additionalData._breinMetaData)&&"string"==typeof e.additionalData._breinMetaData.dataType&&""!==e.additionalData._breinMetaData.dataType.trim()?e.additionalData._breinMetaData.dataType.trim():t},_determineRecommendationData:function(e,t){var n=this._determineRecommendationType(e);t.recommendations="com.brein.common.dto.CustomerProductDto"===n?this._mapProducts(e):"com.brein.common.dto.CustomerAssetsDto"===n?this._mapAssets(e):this._mapAny(e)},_determineAdditionalData:function(e,n){u.isPlainObject(e)&&u.isPlainObject(e.additionalData)&&(n.additionalData={},u.each(e.additionalData,function(e,t){"_breinMetaData"!==e&&"splitTestData"!==e&&(n.additionalData[e]=t)}))},_determineName:function(e,t,n){e=this._extractCandidateNameFromPayload(e);return null===e?"response["+t+"]":"number"==typeof(n=this._extractCandidateNamesFromPayloads(n)[e])&&1<n?e+"["+t+"]":e},_extractCandidateNamesFromPayloads:function(t){var n={};if(u.isArray(t))for(let e=0;e<t.length;e++){var i=u.isPlainObject(t[e])&&u.isPlainObject(t[e].recommender)&&u.isPlainObject(t[e].recommender.payload)?t[e].recommender.payload:t[e],i=this._extractCandidateNameFromPayload(i);null!==i&&(n[i]="number"==typeof n[i]?n[i]+1:1)}return n},_extractCandidateNameFromPayload:function(e){return u.isPlainObject(e)&&u.isArray(e.namedRecommendations)&&1===e.namedRecommendations.length?e.namedRecommendations[0]:null},_determineMetaData:function(e,t){t.meta={},t.meta.type=this._determineRecommendationType(e)},_determineSplitTestData:function(e,t){return u.isPlainObject(e)&&u.isPlainObject(e.additionalData)&&u.isPlainObject(e.additionalData.splitTestData)?t.splitTestData=u.extend({active:!0,isTest:200===e.statusCode,isControl:7120===e.statusCode},e.additionalData.splitTestData):(e.statusCode,t.splitTestData={active:!1,isTest:!1,isControl:!1}),t.active},_mapAssets:function(t){if(!u.isArray(t.result))return[];var n=[];for(let e=0;e<t.result.length;e++){var i=t.result[e],i=this._mapAsset(i);n.push(i)}return n},_mapAsset:function(e){return u.isPlainObject(e)&&"string"==typeof e.dataIdExternal&&u.isPlainObject(e.additionalData)?{_recommenderWeight:e.weight,id:e.dataIdExternal,type:this._getValue(e,"assets::assetType"),url:this._getValue(e,"assets::assetUrl"),image:this._getValue(e,"assets::assetImageUrl"),categories:this._getValue(e,"assets::assetCategories"),description:this._getValue(e,"assets::assetDescription"),additionalData:e.additionalData}:null},_mapProducts:function(t){if(!u.isArray(t.result))return[];var n=[];for(let e=0;e<t.result.length;e++){var i=t.result[e],i=this._mapProduct(i);n.push(i)}return n},_mapProduct:function(e){var t;return u.isPlainObject(e)&&"string"==typeof e.dataIdExternal&&u.isPlainObject(e.additionalData)?(t=null===(t=this._getValue(e,"inventory::productPrice"))?this._getValue(e,"product::productPrice"):t,{_recommenderWeight:e.weight,id:e.dataIdExternal,inventory:this._getValue(e,"inventory::inventoryQuantity"),name:this._getValue(e,"product::productName"),url:this._getValue(e,"product::productUrl"),image:this._getValue(e,"product::productImageUrl"),categories:this._getValue(e,"product::productCategories"),description:this._getValue(e,"product::productDescription"),price:t,additionalData:e.additionalData}):null},_mapAny:function(t){if(!u.isArray(t.result))return[];var n=[];for(let e=0;e<t.result.length;e++){var i=t.result[e],i={_recommenderWeight:i.weight,id:i.dataIdExternal,additionalData:i.additionalData};n.push(i)}return n},_getValue:function(e,t){e=e.additionalData[t];return null==e?null:e}};Breinify.plugins._add("recommendations",t)}})();