(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("webExperiences")){let s=Breinify.UTL._jquery(),t={setup:function(i,e){s.isFunction(e.ready)&&!s.isFunction(e.onChange)&&(e.onChange=e.ready,e.ready=null),s.isPlainObject(i.activationLogic)&&this.setupActivityLogic(i.activationLogic,e)},setupActivityLogic:function(i,e){let n=this,t=null;s.isFunction(e.isValidPage)&&(t=e.isValidPage),e.isValidPage=function(){return!0===n.checkActivityLogic(i)&&(null===t||!0===t.call(e))}},checkSearchParams:function(i){if(!i||!i.param||!i.operator)return!1;var e,n,t=new URLSearchParams(window.location.search),r=i.param.toLowerCase(),a=[];for([e,n]of t.entries())e.toLowerCase()===r&&a.push(n);if(0===a.length)return!1;let s=i.value??"",l;switch(i.operator){case"equals":l=i=>i===s;break;case"contains":l=i=>i.includes(s);break;case"startsWith":l=i=>i.startsWith(s);break;case"endsWith":l=i=>i.endsWith(s);break;case"regex":try{let e=new RegExp(s);l=i=>e.test(i)}catch(i){return!1}break;default:return!1}return a.some(l)},checkActivityLogic:function(i){var e=s.isArray(i.paths)?i.paths:[];let n=0===e.length;for(let i=0;i<e.length&&!1===n;i++){var t=s.isPlainObject(e[i])?e[i]:{},r=Breinify.UTL.isNonEmptyString(t.type),a=Breinify.UTL.isNonEmptyString(t.value);if("ALL_PATHS"===r?n=!0:null===a?console.warn("found invalid value that was not or an empty string"):"STATIC_PATHS"===r?a===window.location.pathname&&(n=!0):"REGEX"===r?!0===new RegExp(r.value).test(window.location.pathname)&&(n=!0):console.warn('found undefined path type "'+t+'" in the activation logic, skipping'),!0===n&&s.isArray(t.searchParameters)&&0<t.searchParameters.length)for(let i=0;i<t.searchParameters.length&&!0===n;i++)n=this.checkSearchParams(t.searchParameters[i])}i=Breinify.UTL.isNonEmptyString(i.snippet);if(null===i)return n;if(!1===n)return!1;i=Breinify.plugins.snippetManager.getSnippet(i);if(!s.isFunction(i))return!1;try{return!0===i()}catch(i){return console.error("[breinify] error occurred while executing activationSnippet: ",i),!1}}};Breinify.plugins._add("webExperiences",{bootstrap:function(i,e,n){"object"!=typeof n?console.error('the module with id "'+i+'" is not a valid module and cannot be setup'):!0!==Breinify.plugins._isAdded("trigger")?console.error('the trigger plugin is not available, skipping setup of the web-experiences with id "'+i+'"'):!0!==Breinify.plugins.api.isModule(i)&&(Breinify.plugins.trigger.init(),t.setup(e,n),Breinify.plugins.api.addModule(i,n))},style(i,e,n){i=s.isPlainObject(i.style)?Breinify.UTL.isNonEmptyString(i.style.snippet):null;if(null!==i&&Breinify.plugins._isAdded("snippetManager")){i=Breinify.UTL.isNonEmptyString(Breinify.plugins.snippetManager.getSnippet(i));if(null!==i)try{null===(n=Breinify.UTL.isNonEmptyString(n))?e.prepend(s(i)):e.find(n).after(s(i))}catch(i){}}},attach:function(i,e){i=s.isPlainObject(i)&&s.isPlainObject(i.position)?i.position:null;if(null==i)return!1;var n=Breinify.UTL.isNonEmptyString(i.operation);if(null===n)return!1;let t;var r=Breinify.UTL.isNonEmptyString(i.selector),i=Breinify.UTL.isNonEmptyString(i.snippet);return null===i&&null===r?t=null:null!==r?t=s(r):null!==i&&(t=null),Breinify.UTL.dom.attachByOperation(n,t,e)}})}})();