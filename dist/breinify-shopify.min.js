(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("shopify")){let i={loadedToken:null,lookUpToken:null,currentCart:null,init:function(){let i=this;$.getJSON(window.Shopify.routes.root+"cart.js",function(t){"string"==typeof t.token&&""!==t.token.trim()&&(i.loadedToken=i.parseToken(t.token))})},getToken:function(){let t=$.isFunction(this.lookUpToken)?this.lookUpToken():null;return t="string"==typeof t&&""!==t.trim()?t:this.lookUpToken},parseToken:function(t){return"string"==typeof t&&""!==t.trim()?"shopify::cart::"+t.replace(/\?key=[a-z\d]+$/,""):null},checkCartChanges:function(t){var i=this.currentCart,n=this.updateCart(t);if(null!==i&&!(null===n||i.isEmpty&&n.isEmpty)){var t=Object.keys(i.items),e=Object.keys(n.items),r=[...new Set([...t,...e])],u=[],o=[];for(let t=0;t<r.length;t++){var s=r[t],a=i.items[s],s=n.items[s];$.isPlainObject(a)&&$.isPlainObject(s)?a.quantity>s.quantity?u.push($.extend(!0,{},a,{quantity:a.quantity-s.quantity})):a.quantity<s.quantity&&o.push($.extend(!0,{},s,{quantity:s.quantity-a.quantity})):$.isPlainObject(a)?u.push(a):o.push(s)}}},updateCart:function(i){if($.isPlainObject(i)){var t=i.item_count;if("number"==typeof t)if(0===t)this.currentCart={isEmpty:!0,size:0,quantity:0,items:{}};else if($.isArray(i.items)){this.currentCart={isEmpty:!0,size:0,quantity:0,items:{}};for(let t=0;t<i.items.length;t++){var n=i.items[t],e=null===(e=Breinify.UTL.toInteger(n.id))?null:""+e;if(null!==e&&"40255563595860"!==e){var r=Breinify.UTL.toInteger(n.quantity);this.currentCart.isEmpty=!1,this.currentCart.size++,this.currentCart.quantity+=null===r?0:r;let t=this.currentCart.items[e];$.isPlainObject(t)||(t={quantity:0},this.currentCart.items[e]=t),t.id=e,t.name=Breinify.UTL.isNonEmptyString(n.product_title),t.quantity+=r}}}}return this.currentCart}};Breinify.plugins._add("shopify",{init:function(){i.init()},cart:{bindLookUpToken:function(t){i.lookUpToken=$.isFunction(t)?function(){return i.parseToken(t())}:null},getToken:function(){return i.getToken()}}})}})();