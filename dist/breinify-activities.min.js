"use strict";!function(){if("object"==typeof Breinify){var a=Breinify.UTL._jquery(),b=Breinify.plugins._overload(),c=Breinify.UTL.constants.errors.prefix.validation,d={pageVisit:function(){var a="pageVisit",c=this;b.overload({"":function(){c._send(a,{},{pageId:window.location.pathname},null)},Function:function(b){c._send(a,{},{pageId:window.location.pathname},b)},"String,Function":function(b,d){c._send(a,{},{pageId:b},d)},String:function(b){c._send(a,{},{pageId:b},null)},"String,Object,Function":function(b,d,e){c._send(a,d,{pageId:b},e)},"String,Object":function(b,d){c._send(a,d,{pageId:b},null)},"Object,Function":function(b,d){c._send(a,{},b,d)},Object:function(b){c._send(a,{},b,null)},"Object,Object,Function":function(b,d,e){c._send(a,b,d,e)},"Object,Object":function(b,d){c._send(a,b,d,null)}},arguments,this)},identify:function(){var a="identify",c=this;b.overload({"Object,Function":function(b,d){c._send(a,b,{},d)},"Object,Object,Function":function(b,d,e){c._send(a,b,d,e)},Object:function(b){c._send(a,b,{},null)},"Object,Object":function(b,d){c._send(a,b,d,null)}},arguments,this)},viewedProduct:function(){b.overload(this._productMethods("viewedProduct"),arguments,this)},addToCart:function(){b.overload(this._productMethods("addToCart"),arguments,this)},removeFromCart:function(){b.overload(this._productMethods("removeFromCart"),arguments,this)},checkOut:function(){var a="checkOut",c=this;b.overload({"String,Array,Object,Object,Array,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,Object,Object,Object,Array,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,String,Object,Object,Array,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,Array,Object,Object,Object,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,Object,Object,Object,Object,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,String,Object,Object,Object,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,Array,Object,Object,String,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,Object,Object,Object,String,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,String,Object,Object,String,Object,Function":function(b,d,e,f,g,h,i){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h,i)},"String,Array,Object,Array,Object,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,Object,Object,Array,Object,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,String,Object,Array,Object,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,Array,Object,Object,Object,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,Object,Object,Object,Object,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,String,Object,Object,Object,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,Array,Object,Object,String,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,Object,Object,Object,String,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,String,Object,Object,String,Object":function(b,d,e,f,g,h){h=c._mapCheckOutToTags(b,d,e,f,h),c._send(a,g,h)},"String,Array,Object,Object,Array,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,Object,Object,Object,Array,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,String,Object,Object,Array,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,Array,Object,Object,Object,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,Object,Object,Object,Object,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,String,Object,Object,Object,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,Array,Object,Object,String,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,Object,Object,Object,String,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,String,Object,Object,String,Function":function(b,d,e,f,g,h){var i=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,i,h)},"String,Array,Object,Array,Object":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,Object,Object,Array,Object":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,String,Object,Array,Object":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,Array,Object,Object,Object":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,Object,Object,Object,Object":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,String,Object,Object,Object":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,Array,Object,Object,String":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,Object,Object,Object,String":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)},"String,String,Object,Object,String":function(b,d,e,f,g){var h=c._mapCheckOutToTags(b,d,e,f,{});c._send(a,g,h)}},arguments,this)},_productMethods:function(a){var b=this;return{"Array,Function":function(c,d){var e=b._mapProductsToTags(c);b._send(a,{},e,d)},"Object,Function":function(c,d){var e=b._mapProductsToTags(c);b._send(a,{},e,d)},"String,Function":function(c,d){var e=b._mapProductsToTags(c);b._send(a,{},e,d)},String:function(c){var d=b._mapProductsToTags(c);b._send(a,{},d,null)},Array:function(c){var d=b._mapProductsToTags(c);b._send(a,{},d,null)},Object:function(c){var d=b._mapProductsToTags(c);b._send(a,{},d,null)},"String,Object,Function":function(c,d,e){var f=b._mapProductsToTags(c);b._send(a,d,f,e)},"Array,Object,Function":function(c,d,e){var f=b._mapProductsToTags(c);b._send(a,d,f,e)},"Object,Object,Function":function(c,d,e){var f=b._mapProductsToTags(c);b._send(a,d,f,e)},"String,Object":function(c,d){var e=b._mapProductsToTags(c);b._send(a,d,e,null)},"Array,Object":function(c,d){var e=b._mapProductsToTags(c);b._send(a,d,e,null)},"Object,Object":function(c,d){var e=b._mapProductsToTags(c);b._send(a,d,e,null)},"String,Object,Object,Function":function(c,d,e,f){e=b._mapProductsToTags(c,e),b._send(a,d,e,f)},"Array,Object,Object,Function":function(c,d,e,f){e=b._mapProductsToTags(c,e),b._send(a,d,e,f)},"Object,Object,Object,Function":function(c,d,e,f){e=b._mapProductsToTags(c,e),b._send(a,d,e,f)},"String,Object,Object":function(c,d,e){e=b._mapProductsToTags(c,e),b._send(a,d,e,null)},"Array,Object,Object":function(c,d,e){e=b._mapProductsToTags(c,e),b._send(a,d,e,null)},"Object,Object,Object":function(c,d,e){e=b._mapProductsToTags(c,e),b._send(a,d,e,null)}}},_mapCheckOutToTags:function(b,c,d,e,f){return f=this._mapProductsToTags(c,f),f=this._mapPromotionsToTags(e,f),a.isPlainObject(d)&&(f.transactionPriceTotal="number"==typeof d.priceTotal?d.priceTotal:0,f.transactionTaxTotal="number"==typeof d.taxTotal?d.taxTotal:0,f.transactionDiscountTotal="number"==typeof d.discountTotal?d.discountTotal:0,f.transactionMiscTotal="number"==typeof d.miscTotal?d.miscTotal:0,f.transactionTotal="number"==typeof d.total?d.total:f.transactionPriceTotal+f.transactionTaxTotal+f.transactionMiscTotal-f.transactionDiscountTotal),f.transactionId=b,f},_mapProductsToTags:function(b,d){if(a.isPlainObject(b))return this._mapProductsToTags([b],d);if("string"==typeof b)return this._mapProductsToTags([{id:b}],d);if("undefined"==typeof b||null===b)return d;if(!a.isArray(b))throw new Error(c+"The defined `products` are invalid: "+JSON.stringify(b));for(var e=b.length,f=e>0,g=e>0,h=e>0,i=e>0,j=[],k=[],l=[],m=[],n=0;n<e;n++){var o=b[n],p=null,q=null,r=null,s=null;"string"==typeof o?p=o:a.isPlainObject(o)&&(p="string"==typeof o.id?o.id.trim():null,q="number"==typeof o.quantity?o.quantity:null,r="number"==typeof o.price?o.price:null,s="string"==typeof o.category?o.category.trim():null),h=h&&!Breinify.UTL.isEmpty(p),f=f&&!Breinify.UTL.isEmpty(q),g=g&&!Breinify.UTL.isEmpty(r),i=i&&!Breinify.UTL.isEmpty(s),l.push(p),k.push(r),j.push(q),m.push(s)}if(h)return a.extend(!0,{},d,{productQuantity:f?j:null,productPrices:g?k:null,productIds:h?l:null,productCategories:i?m:null});throw new Error("Products must have an identifier: "+JSON.stringify(b))},_mapPromotionsToTags:function(b,d){if(a.isPlainObject(b))return this._mapPromotionsToTags([b],d);if("string"==typeof b)return this._mapPromotionsToTags([{id:b}],d);if("undefined"==typeof b||null===b)return d;if(!a.isArray(b))throw new Error(c+"The defined `promotions` are invalid: "+JSON.stringify(b));for(var e=b.length,f=e>0,g=[],h=[],i=0;i<e;i++){var j=b[i],k=null,l=null;"string"==typeof j?k=j:a.isPlainObject(j)&&(k="string"==typeof j.id?j.id.trim():null,l="number"==typeof j.amount?j.amount:null),f=f&&!Breinify.UTL.isEmpty(k),h.push(k),g.push(l)}if(f)return a.extend(!0,{},d,{promotionIds:f?h:null,promotionAmounts:f?g:null});throw new Error("Promotions must have an identifier: "+JSON.stringify(b))},_send:function(b,c,d,e){c=Breinify.UTL.user.create(c),d=a.isPlainObject(d)?d:{},Breinify.activity(c,b,null,null,d,function(a,b){"function"!=typeof e||("string"==typeof b?e(new Error(prefixApi+b)):e(null,{user:c,tags:d}))})}};Breinify.plugins.activities=d}}();