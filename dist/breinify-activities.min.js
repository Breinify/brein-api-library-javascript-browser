(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("activities")){let p=Breinify.UTL._jquery(),t=Breinify.plugins._overload(),y=Breinify.UTL.constants.errors.prefix.validation,a=Breinify.UTL.constants.errors.prefix.api,c=Breinify.UTL.uuid(),o=function(t,e){if("ga"!==t.type)throw new Error("Using currently unavailable type: "+t.type);return{hitType:"event",eventCategory:"breinify",eventAction:e.type,eventLabel:e.tags.id,eventValue:1}},s={initialized:!1,type:null,instance:null,mapper:null,init:function(n,i){let r=this;if(!0===this.initialized)i(!0);else{let e=this._determineType(n.type);switch(e){case"ga":this._waitForInstance("ga",function(t){ga(function(){r.type=e,r.instance=r._determineGaInstance(ga.getAll(),n.trackerId),r.mapper=p.isFunction(n.mapper)?n.mapper:o,r.initialized=!0,i(r.initialized)})});break;case"gtag":r.type=e,r.initialized=!0,i(r.initialized);break;default:throw new Error("Using currently unavailable type: "+e)}}},handle:function(t,e){let n=this;this.init(t,function(t){if(!1!==t){t=n.mapper(n,e);if(null!==t){if("ga"!==n.type)throw new Error("Using currently unavailable type: "+gaType);n.instance.send(t)}}})},_waitForInstance:function(e,n,i){var t=window[e];if(null!=t)n(t);else if(5e3<=i)console.error(e+" enabled but not available (waited "+i+" [ms]).");else{let t=this;setTimeout(function(){t._waitForInstance(e,n,("number"==typeof i?i:0)+50)},50)}},_determineGaInstance:function(t,e){var n="string"==typeof e?e:null;if(!p.isArray(t)||t.length<0)throw new Error("Unable to determine instance.");if(1===t.length&&null===n)return t[0];for(var i=0;i<t.length;i++)if(t[i].get("trackingId")===n)return t[i];throw null===n?new Error("Please specify trackingId of trackers to be used, found: "+t.length):new Error("Unable to determine instance with trackingId: "+n)},_determineType:function(t){t="string"==typeof t?t.toLowerCase():null;if("ga"===t||"gtag"===t)return t;if("function"==typeof window.ga)return"ga";if("function"==typeof window.gtag)return"gtag";throw new Error("Unable to determine type, please specify.")},_applyDefaultMapping:function(t){return o(this,t)}};const n={store:function(t,e){var n=Breinify.UTL.cookies.delayedActivities;let i={};Breinify.UTL.cookie.check(n)&&(i=Breinify.UTL.cookie.getJson(n));t="string"==typeof t?t:Breinify.UTL.uuid(),i[t]=e,e=Breinify.UTL.cookie.domain();return Breinify.UTL.cookie.setJson(n,i,null,!0,e),t},getAll:function(){var t=Breinify.UTL.cookies.delayedActivities;return Breinify.UTL.cookie.getJson(t)},get:function(t){var e=this.getAll();return p.isPlainObject(e)&&p.isPlainObject(e[t])?e[t]:null},remove:function(t){var e=Breinify.UTL.cookie.domain(),n=Breinify.UTL.cookies.delayedActivities,i=Breinify.UTL.cookie.getJson(n);delete i[t],Breinify.UTL.cookie.setJson(n,i,null,!0,e)}},r={prefix:"br-scheduled-activity-",store:function(t,e){window.localStorage.setItem(this.prefix+t,JSON.stringify(e))},getAll:function(){let t=null;for(var e=0,n=window.localStorage.length;e<n;++e){var i,r=window.localStorage.key(e);0!==!r.indexOf(this.prefix)&&(r=r.substring(this.prefix.length),null!==(i=this.get(r)))&&((t=null===t?{}:t)[r]=i)}return t},get:function(t){t=window.localStorage.getItem(this.prefix+t);return"string"==typeof t?JSON.parse(t):null},remove:function(t){window.localStorage.removeItem(this.prefix+t)}};let u;try{window.localStorage.setItem("br-local-storage-test","true"),window.localStorage.removeItem("br-local-storage-test"),u=r}catch(t){u=n}let l={settings:{onElementSelection:function(t){return t}}},i={settings:{bindDataByTag:!1,evaluateOnSetup:!1,onActivation:function(t,e,n,i){}},data:{tags:{pageId:window.location.pathname}}},d={observer:"click",settings:{activityType:"clickedElement",scheduleActivities:null,onBeforeActivitySent:function(t,e,n,i){},onAfterActivitySent:function(t,e,n,i){}},data:{user:{},tags:{}}},g={marker:{activate:"brob-active",elementData:"brob-data"},actions:{removed:"removed",added:"added",changed:"changed"},mutationObserver:null,additionalMutationObservers:{},blurElements:[],blurListener:null,init:function(){let s=this,u="data-"+this.marker.activate;this.mutationObserver=new MutationObserver(function(e){for(let t=0;t<e.length;t++){var n=e[t],i=n.attributeName,r=e[t].addedNodes,a=e[t].removedNodes;"string"==typeof i&&i===u&&s.determineChangedElement(p(n.target),s.actions.changed);for(let t=0;t<r.length;t++){var c=r[t];s.determineChangedElement(p(c),s.actions.added)}for(let t=0;t<a.length;t++){var o=a[t];s.determineChangedElement(p(o),s.actions.removed)}}}),this.mutationObserver.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeFilter:[u]})},setupObservableDomElement:function(e,n,i,r){let t=this;if(1<e.length)e.each(function(){t.setupObservableDomElement(p(this),n,i,r)});else{var a=g.normalizeSettings(n,i),c=g.normalizeData(n,i,r);let t=g.readElementData(e);(t=p.isArray(t)?t:[]).push({observe:n,settings:a,data:c}),!0===a.bindDataByTag?e.attr("data-"+this.marker.elementData,JSON.stringify(t)):e.data(this.marker.elementData,t),e.attr("data-"+this.marker.activate,"true"),!0===a.evaluateOnSetup&&g.evaluate(e)}},registerAdditionalMutationObserver:function(s,u,l,d,t){let g=this;var e;void 0===this.additionalMutationObservers[s]&&(e=p(s),g.setupSelectedElement(e,s,this.actions.added,u,l,d),(e=new MutationObserver(function(e){for(let t=0;t<e.length;t++){var n=e[t],i=n.attributeName,r=e[t].addedNodes,a=e[t].removedNodes;"string"==typeof i&&(i=p(n.target)).is(s)&&g.setupSelectedElement(i,s,g.actions.changed,u,l,d);for(let t=0;t<r.length;t++){var c=p(r[t]);g.setupSelectedElement(c,s,g.actions.added,u,l,d)}for(let t=0;t<a.length;t++){var o=p(a[t]);g.setupSelectedElement(o,s,g.actions.removed,u,l,d)}}})).observe(document,{subtree:!0,childList:!0,attributes:!0,attributeFilter:p.isArray(t)?t:void 0}),this.additionalMutationObservers[s]=e)},setupSelectedElement:function(t,e,n,i,r,a){let c=this;var o;1<t.length?t.each(function(){c.setupSelectedElement(p(this),e,n,i,r,a)}):t.is(e)?(o=p.extend(!0,{},l.settings,r),(p.isFunction(o.onElementSelection)?o.onElementSelection(t):t).each(function(){var t=p(this),e=t.attr("data-"+c.marker.activate);"string"==typeof e&&""!==e.trim()||c.setupObservableDomElement(t,i,r,a)})):(t.find(e).each(function(){c.setupSelectedElement(p(this),e,n,i,r,a)}),t.parents(e).each(function(){c.setupSelectedElement(p(this),e,n,i,r,a)}))},determineChangedElement:function(e,n){let i=this;var r="[data-"+this.marker.activate+"]";if(e.is(r))this.handleChangedElement(e,n);else{let t=e.find(r);0<t.length&&t.each(function(){i.handleChangedElement(t,n)})}},handleChangedElement:function(t,e){this.actions.added===e||this.actions.changed===e?this.evaluate(t):this.actions.removed},normalizeSettings:function(t,e){return t===d.observer?p.extend(!0,{},i.settings,d.settings,e):p.extend(!0,{},i.settings,e)},normalizeData:function(t,e,n){return t===d.observer?p.extend(!0,i.data,d.data,n):n},readElementData:function(t){let e;var n=t.data(this.marker.elementData);if("string"==typeof n&&"string"==typeof t.attr("data-"+this.marker.elementData))try{e=JSON.parse(n)}catch(t){e=[]}else e=p.isPlainObject(n)?[n]:p.isArray(n)?n:[];return e},evaluate:function(e){let t=this;var n=e.attr("data-"+g.marker.activate);let i;if("true"===n)i=this.activateObserver;else{if("false"!==n)return;i=this.deactivateObserver}var r=this.readElementData(e);for(let t=0;t<r.length;t++){var a=p.isPlainObject(r[t])?r[t]:{};i.call(this,e,a)}e.attr("data-"+g.marker.activate,"evaluated"),e.find("[data-"+g.marker.activate+"]").each(function(){t.evaluate(p(this))})},activateObserver:function(t,e){var n,i,r=p.isPlainObject(e.settings)?e.settings:{},a=p.isPlainObject(e.data)?e.data:{};p.isFunction(r.onActivation)&&(n=a.user,i=a.tags,r.onActivation(r,{$el:t},n,i)),e.observe===d.observer&&this.activateClickObserver(t,r,a)},activateClickObserver:function(e,n,i){let r=this;e.is("iframe")?(null===this.blurListener&&(this.blurListener=function(e){for(let t=0;t<r.blurElements.length;t++){var n=r.blurElements[t];p(document.activeElement).is(n.$el)&&r.handleClick(e,n.$el,n.settings,n.data)}},window.addEventListener("blur",this.blurListener)),this.blurElements.push({$el:e,settings:n,data:i})):e.click(function(t){r.handleClick(t,e,n,i)})},handleClick:function(t,e,n,i){var r=t.metaKey||t.ctrlKey||2===t.which,a=t.target instanceof HTMLAnchorElement;let c=i.user,o=i.tags;i="string"==typeof n.activityType&&""!==n.activityType?n.activityType:"clickedElement";let s={$el:e,event:t,defaultOpenInNewTab:r,defaultWillReloadPage:a,overriddenScheduleActivities:!1},u=!0;if(!1!==(u=p.isFunction(n.onBeforeActivitySent)&&"boolean"!=typeof(u=n.onBeforeActivitySent(n,s,c,o,e))||u)){let t=null;null===n.scheduleActivities?t=!1!=a&&!0!==r:"boolean"==typeof n.scheduleActivities&&(t=n.scheduleActivities||s.overriddenScheduleActivities),!0===t?Breinify.plugins.activities.scheduleDelayedActivity(c,i,o,6e4):!1===t&&Breinify.plugins.activities.generic(i,c,o,function(){p.isFunction(n.onAfterActivitySent)&&n.onAfterActivitySent(n,s,c,o,e)})}},deactivateObserver:function(t,e){}};let e=Breinify.plugins._add("activities",{domObserverActive:!1,activateDomObserver:function(){!0!==this.domObserverActive&&(g.init(),this.domObserverActive=!0)},registerAdditionalMutationObserver:function(t,e,n,i,r){return g.registerAdditionalMutationObserver(t,e,n,i,r),this},setupObservableDomElement:function(t,e,n,i){return g.setupObservableDomElement(t,e,n,i),this},generic:function(){let r=this;t.overload({"String,Object":function(t,e){r._send(t,e,{},null)},"String,Object,Object":function(t,e,n){r._send(t,e,n,null)},"String,Object,Object,Function":function(t,e,n,i){r._send(t,e,n,i)}},arguments,this)},pageVisit:function(){let i="pageVisit",r=this;t.overload({"":function(){r._send(i,{},{pageId:window.location.pathname},null)},Function:function(t){r._send(i,{},{pageId:window.location.pathname},t)},"String,Function":function(t,e){r._send(i,{},{pageId:t},e)},String:function(t){r._send(i,{},{pageId:t},null)},"String,Object,Function":function(t,e,n){r._send(i,e,{pageId:t},n)},"String,Object":function(t,e){r._send(i,e,{pageId:t},null)},"Object,Function":function(t,e){r._send(i,{},t,e)},Object:function(t){r._send(i,{},t,null)},"Object,Object,Function":function(t,e,n){r._send(i,t,e,n)},"Object,Object":function(t,e){r._send(i,t,e,null)}},arguments,this)},identify:function(){let i="identify",r=this;t.overload({"Object,Function":function(t,e){r._send(i,t,{},e)},"Object,Object,Function":function(t,e,n){r._send(i,t,e,n)},Object:function(t){r._send(i,t,{},null)},"Object,Object":function(t,e){r._send(i,t,e,null)}},arguments,this)},viewedProduct:function(){t.overload(this._productMethods("viewedProduct"),arguments,this)},addToCart:function(){t.overload(this._productMethods("addToCart"),arguments,this)},removeFromCart:function(){t.overload(this._productMethods("removeFromCart"),arguments,this)},checkOut:function(){let o="checkOut",s=this;t.overload({"String,Array,Object,Object,Array,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Object,Object,Object,Array,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,String,Object,Object,Array,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Array,Object,Object,Object,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Object,Object,Object,Object,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,String,Object,Object,Object,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Array,Object,Object,String,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Object,Object,Object,String,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,String,Object,Object,String,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Array,Object,Array,Object,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,Object,Object,Array,Object,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,String,Object,Array,Object,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,Array,Object,Object,Object,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,Object,Object,Object,Object,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,String,Object,Object,Object,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,Array,Object,Object,String,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,Object,Object,Object,String,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,String,Object,Object,String,Object":function(t,e,n,i,r,a){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a)},"String,Array,Object,Object,Array,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Object,Object,Object,Array,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,String,Object,Object,Array,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Array,Object,Object,Object,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Object,Object,Object,Object,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,String,Object,Object,Object,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Array,Object,Object,String,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Array,Object,Array,Object,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Array,Object,Array,Object,Object,Function":function(t,e,n,i,r,a,c){a=s._mapCheckOutToTags(t,e,n,i,a),s._send(o,r,a,c)},"String,Object,Object,Object,String,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,String,Object,Object,String,Function":function(t,e,n,i,r,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t,a)},"String,Array,Object,Array,Object":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,Object,Object,Array,Object":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,String,Object,Array,Object":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,Array,Object,Object,Object":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,Object,Object,Object,Object":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,String,Object,Object,Object":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,Array,Object,Object,String":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,Object,Object,Object,String":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)},"String,String,Object,Object,String":function(t,e,n,i,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(o,r,t)}},arguments,this)},scheduleDelayedActivity:function(t,e,n,i,r,a){t={user:t,tags:n,type:e,maxAgeInMs:i,filter:r,timestamp:(new Date).getTime()};return u.store(a,t)},readDelayedActivityData:function(t){return u.get(t)},hasDelayedActivityData:function(e){let t;t="string"==typeof e?function(t){return t===e}:p.isFunction(e)?e:e instanceof RegExp?function(t){return e.test(t)}:function(){return!1};var n=u.getAll();return!(null===n||!p.isPlainObject(n))&&0<p.grep(n,t).length},removeDelayedActivityData:function(t){u.remove(t)},checkDelayedActivityData:function(){let n=this;var t=u.getAll();p.each(t,function(t,e){n._checkDelayedActivityData(t,e)})},_checkDelayedActivityData:function(n,i){if("string"==typeof i.type&&(p.isPlainObject(i.tags)||null==i.tags)&&(p.isPlainObject(i.user)||null==i.user)){var r=(new Date).getTime();if(("number"==typeof i.maxAgeInMs&&0<i.maxAgeInMs?i.timestamp+i.maxAgeInMs:r)<r)this.removeDelayedActivityData(n);else{var r=i.filter,a="string"==typeof r?r.split("::"):[];let t,e;if(2<=a.length){e=Breinify.plugins[a[0]];for(var c=1;c<a.length-1;c++)e=p.isPlainObject(e)?e[a[c]]:null;t=a[a.length-1]}else t=1===a.length?(e=window,a[0]):e=null;if("object"!=typeof e||"string"!=typeof t||null===e)this._send(i.type,i.user,i.tags),this.removeDelayedActivityData(n);else if(p.isFunction(e[t])){let r=this;e[t].apply(e,[n,i,function(t,e,n,i){!0===n?(r._send(e.type,e.user,e.tags),r.removeDelayedActivityData(t)):!0===i&&r.removeDelayedActivityData(t)}])}}}},_productMethods:function(r){let a=this;return{"Array,Function":function(t,e){t=a._mapProductsToTags(t);a._send(r,{},t,e)},"Object,Function":function(t,e){t=a._mapProductsToTags(t);a._send(r,{},t,e)},"String,Function":function(t,e){t=a._mapProductsToTags(t);a._send(r,{},t,e)},String:function(t){t=a._mapProductsToTags(t);a._send(r,{},t,null)},Array:function(t){t=a._mapProductsToTags(t);a._send(r,{},t,null)},Object:function(t){t=a._mapProductsToTags(t);a._send(r,{},t,null)},"String,Object,Function":function(t,e,n){t=a._mapProductsToTags(t);a._send(r,e,t,n)},"Array,Object,Function":function(t,e,n){t=a._mapProductsToTags(t);a._send(r,e,t,n)},"Object,Object,Function":function(t,e,n){t=a._mapProductsToTags(t);a._send(r,e,t,n)},"String,Object":function(t,e){t=a._mapProductsToTags(t);a._send(r,e,t,null)},"Array,Object":function(t,e){t=a._mapProductsToTags(t);a._send(r,e,t,null)},"Object,Object":function(t,e){t=a._mapProductsToTags(t);a._send(r,e,t,null)},"String,Object,Object,Function":function(t,e,n,i){n=a._mapProductsToTags(t,n),a._send(r,e,n,i)},"Array,Object,Object,Function":function(t,e,n,i){n=a._mapProductsToTags(t,n),a._send(r,e,n,i)},"Object,Object,Object,Function":function(t,e,n,i){n=a._mapProductsToTags(t,n),a._send(r,e,n,i)},"String,Object,Object":function(t,e,n){n=a._mapProductsToTags(t,n),a._send(r,e,n,null)},"Array,Object,Object":function(t,e,n){n=a._mapProductsToTags(t,n),a._send(r,e,n,null)},"Object,Object,Object":function(t,e,n){n=a._mapProductsToTags(t,n),a._send(r,e,n,null)}}},_mapCheckOutToTags:function(t,e,n,i,r){return r=this._mapProductsToTags(e,r),r=this._mapPromotionsToTags(i,r),p.isPlainObject(n)&&(r.transactionPriceTotal="number"==typeof n.priceTotal?n.priceTotal:0,r.transactionTaxTotal="number"==typeof n.taxTotal?n.taxTotal:0,r.transactionDiscountTotal="number"==typeof n.discountTotal?n.discountTotal:0,r.transactionMiscTotal="number"==typeof n.miscTotal?n.miscTotal:0,r.transactionTotal="number"==typeof n.total?n.total:r.transactionPriceTotal+r.transactionTaxTotal+r.transactionMiscTotal-r.transactionDiscountTotal),r.transactionId=t,r},_mapProductsToTags:function(a,t){if(p.isPlainObject(a))return this._mapProductsToTags([a],t);if("string"==typeof a)return this._mapProductsToTags([{id:a}],t);if(null==a)return t;if(!p.isArray(a))throw new Error(y+"The defined `products` are invalid: "+JSON.stringify(a));var e=a.length;let c=0<e,o=0<e,s=0<e,u=0<e,l=0<e;for(var n,d=[],g=[],f=[],b=[],O=[],m=0;m<e;m++){var h=a[m];let t=null,e=null,n=null,i=null,r=null;"string"==typeof h?t=h:p.isPlainObject(h)&&(t="string"==typeof h.id?h.id.trim():null,e="number"==typeof h.quantity?h.quantity:null,n="number"==typeof h.price?h.price:null,i="string"==typeof h.category?h.category.trim():null,r="string"==typeof h.name?h.name.trim():null),s=s&&!Breinify.UTL.isEmpty(t),c=c&&!Breinify.UTL.isEmpty(e),o=o&&!Breinify.UTL.isEmpty(n),u=u&&!Breinify.UTL.isEmpty(i),l=l&&!Breinify.UTL.isEmpty(r),f.push(t),g.push(n),d.push(e),b.push(i),O.push(r)}if(s)return n={},c&&(n.productQuantities=d),o&&(n.productPrices=g),s&&(n.productIds=f),l&&(n.productNames=O),u&&(n.productCategories=b),p.extend(!0,{},t,n);throw new Error("Products must have an identifier: "+JSON.stringify(a))},_mapPromotionsToTags:function(n,t){if(p.isPlainObject(n))return this._mapPromotionsToTags([n],t);if("string"==typeof n)return this._mapPromotionsToTags([{id:n}],t);if(null==n)return t;if(!p.isArray(n))throw new Error(y+"The defined `promotions` are invalid: "+JSON.stringify(n));if(0===n.length)return t;var e=n.length;let i=0<e,r=0<e;for(var a=[],c=[],o=0;o<e;o++){var s=n[o];let t=null,e=null;"string"==typeof s?t=s:p.isPlainObject(s)&&(t="string"==typeof s.id?s.id.trim():null,e="number"==typeof s.amount?s.amount:null),i=i&&!Breinify.UTL.isEmpty(t),r=r&&!Breinify.UTL.isEmpty(e),c.push(t),a.push(e)}if(i)return p.extend(!0,{},t,{promotionIds:i?c:null,promotionAmounts:r?a:null});throw new Error("Promotions must have an identifier: "+JSON.stringify(n))},_extendTags:function(t,e){var n=this.getConfig("tagsExtender",function(){return{}});return p.isPlainObject(e)||(e={}),null!==n&&p.isFunction(n)?p.extend({},n(t),e):p.extend({},e)},_send:function(t,n,i,r){n=Breinify.UTL.user.create(n),(i=this._extendTags(t,i)).id="string"==typeof i.id?i.id:Breinify.UTL.uuid(),i.originId=c,Breinify.activity(n,t,null,null,i,function(t,e){"function"==typeof r&&("string"==typeof e?r(new Error(a+e)):r(null,{user:n,tags:i}))});var e=this.getConfig("googleAnalytics",{enabled:!1});p.isPlainObject(e)&&!0===e.enabled&&s.handle(e,{user:n,type:t,tags:i})}});Breinify.onReady(function(){e.checkDelayedActivityData()})}})();