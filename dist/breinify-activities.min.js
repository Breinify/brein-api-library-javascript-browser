(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("activities")){let p=Breinify.UTL._jquery(),t=Breinify.plugins._overload(),v=Breinify.UTL.constants.errors.prefix.validation,r=Breinify.UTL.constants.errors.prefix.api,o=Breinify.UTL.uuid(),c=function(t,e){if("ga"!==t.type)throw new Error("Using currently unavailable type: "+t.type);return{hitType:"event",eventCategory:"breinify",eventAction:e.type,eventLabel:e.tags.id,eventValue:1}},s={initialized:!1,type:null,instance:null,mapper:null,init:function(n,i){let a=this;if(!0===this.initialized)i(!0);else{let e=this._determineType(n.type);switch(e){case"ga":this._waitForInstance("ga",function(t){ga(function(){a.type=e,a.instance=a._determineGaInstance(ga.getAll(),n.trackerId),a.mapper=p.isFunction(n.mapper)?n.mapper:c,a.initialized=!0,i(a.initialized)})});break;case"gtag":a.type=e,a.initialized=!0,i(a.initialized);break;default:throw new Error("Using currently unavailable type: "+e)}}},handle:function(t,e){let n=this;this.init(t,function(t){if(!1!==t){t=n.mapper(n,e);if(null!==t){if("ga"!==n.type)throw new Error("Using currently unavailable type: "+gaType);n.instance.send(t)}}})},_waitForInstance:function(e,n,i){var t=window[e];if(null!=t)n(t);else if(5e3<=i)console.error(e+" enabled but not available (waited "+i+" [ms]).");else{let t=this;setTimeout(function(){t._waitForInstance(e,n,("number"==typeof i?i:0)+50)},50)}},_determineGaInstance:function(t,e){var n="string"==typeof e?e:null;if(!p.isArray(t)||t.length<0)throw new Error("Unable to determine instance.");if(1===t.length&&null===n)return t[0];for(var i=0;i<t.length;i++)if(t[i].get("trackingId")===n)return t[i];throw null===n?new Error("Please specify trackingId of trackers to be used, found: "+t.length):new Error("Unable to determine instance with trackingId: "+n)},_determineType:function(t){t="string"==typeof t?t.toLowerCase():null;if("ga"===t||"gtag"===t)return t;if("function"==typeof window.ga)return"ga";if("function"==typeof window.gtag)return"gtag";throw new Error("Unable to determine type, please specify.")},_applyDefaultMapping:function(t){return c(this,t)}};const n={store:function(t,e){var n=Breinify.UTL.cookies.delayedActivities;let i={};Breinify.UTL.cookie.check(n)&&(i=Breinify.UTL.cookie.getJson(n));t="string"==typeof t?t:Breinify.UTL.uuid(),i[t]=e,e=Breinify.UTL.cookie.domain();return Breinify.UTL.cookie.setJson(n,i,null,!0,e),t},getAll:function(){var t=Breinify.UTL.cookies.delayedActivities;return Breinify.UTL.cookie.getJson(t)},get:function(t){var e=this.getAll();return p.isPlainObject(e)&&p.isPlainObject(e[t])?e[t]:null},remove:function(t){var e=Breinify.UTL.cookie.domain(),n=Breinify.UTL.cookies.delayedActivities,i=Breinify.UTL.cookie.getJson(n);delete i[t],Breinify.UTL.cookie.setJson(n,i,null,!0,e)}},a={prefix:"br-scheduled-activity-",store:function(t,e){window.localStorage.setItem(this.prefix+t,JSON.stringify(e))},getAll:function(){let t=null;for(var e=0,n=window.localStorage.length;e<n;++e){var i,a=window.localStorage.key(e);0!==!a.indexOf(this.prefix)&&(a=a.substring(this.prefix.length),null!==(i=this.get(a)))&&((t=null===t?{}:t)[a]=i)}return t},get:function(t){t=window.localStorage.getItem(this.prefix+t);return"string"==typeof t?JSON.parse(t):null},remove:function(t){window.localStorage.removeItem(this.prefix+t)}};let l;try{window.localStorage.setItem("br-local-storage-test","true"),window.localStorage.removeItem("br-local-storage-test"),l=a}catch(t){l=n}let u={settings:{onElementSelection:function(t){return t}}},i={settings:{bindDataByTag:!1,evaluateOnSetup:!1,onActivation:function(t,e,n,i){}},data:{tags:{pageId:window.location.pathname}}},d={observer:"submit",settings:{activityType:"submittedForm",scheduleActivities:null,onBeforeActivitySent:function(t,e,n,i){},onActivitySent:function(t,e,n,i){},onAfterActivitySent:function(t,e,n,i){}}},g={observer:"rendered",settings:{activityType:"renderedElement",scheduleActivities:null,onBeforeActivitySent:function(t,e,n,i){},onActivitySent:function(t,e,n,i){},onAfterActivitySent:function(t,e,n,i){}}},f={observer:"click",settings:{activityType:"clickedElement",scheduleActivities:null,onBeforeActivitySent:function(t,e,n,i){},onActivitySent:function(t,e,n,i){},onAfterActivitySent:function(t,e,n,i){}},data:{user:{},tags:{}}},b={marker:{activate:"brob-active",elementData:"brob-data"},actions:{removed:"removed",added:"added",changed:"changed"},mutationObserver:null,additionalSelectors:{},additionalObservers:{},additionalMutationObservers:null,blurElements:[],blurListener:null,init:function(){let s=this,l="data-"+this.marker.activate;this.mutationObserver=new MutationObserver(function(e){for(let t=0;t<e.length;t++){var n=e[t],i=n.attributeName,a=e[t].addedNodes,r=e[t].removedNodes;"string"==typeof i&&i===l&&s.determineChangedElement(p(n.target),s.actions.changed);for(let t=0;t<a.length;t++){var o=a[t];s.determineChangedElement(p(o),s.actions.added)}for(let t=0;t<r.length;t++){var c=r[t];s.determineChangedElement(p(c),s.actions.removed)}}}),this.mutationObserver.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeFilter:[l]})},setupObservableDomElement:function(n,i,a,r){let t=this;if(1<n.length)n.each(function(){t.setupObservableDomElement(p(this),i,a,r)});else{var o=b.normalizeSettings(i,a),c=b.normalizeData(i,a,r);let t=b.readElementData(n),e=(p.isArray(t)||(t=[]),Breinify.UTL.isNonEmptyString(o.id));null!==e&&t.some(t=>p.isPlainObject(t.settings)&&t.settings.id===e)||(t.push({observe:i,settings:o,data:c}),!0===o.bindDataByTag?n.attr("data-"+this.marker.elementData,JSON.stringify(t)):n.data(this.marker.elementData,t),c="data-"+this.marker.activate,null===Breinify.UTL.isNonEmptyString(n.attr(c))&&n.attr("data-"+this.marker.activate,"true"),!0===o.evaluateOnSetup&&b.evaluate(n))}},registerAdditionalMutationObserver:function(t,n,i,a,e){let r=this,o;if(p.isArray(t))o=t;else{if("string"!=typeof t)return;o=[t]}for(let e=0;e<o.length;e++){var c=o[e],s=p(c),s=(r.setupSelectedElement(s,c,this.actions.added,n,i,a),Breinify.UTL.uuid());this.additionalObservers[s]={selector:c,observerType:n,settings:i,data:a};let t=p.isArray(this.additionalSelectors[c])?this.additionalSelectors[c]:[];(this.additionalSelectors[c]=t).push(s)}null===this.additionalMutationObservers&&(this.additionalMutationObservers=new MutationObserver(function(t){r.handleAdditionalMutations(t)}),this.additionalMutationObservers.observe(document,{subtree:!0,childList:!0,attributes:!0}))},handleAdditionalMutations:function(e){for(let t=0;t<e.length;t++){var n=e[t],i="string"==typeof n.attributeName?n.target:null,a=e[t].addedNodes,r=e[t].removedNodes,o=Object.keys(this.additionalSelectors);for(let t=0;t<o.length;t++){var c=o[t];this.handleAdditionalMutationObserverChanges(c,i,a,r)}}},handleAdditionalMutationObserverChanges:function(e,t,n,i){null!==t&&(t=p(t)).is(e)&&this.applyAdditionalMutationObserverChanges(t,e,this.actions.changed);for(let t=0;t<n.length;t++){var a=p(n[t]);this.applyAdditionalMutationObserverChanges(a,e,this.actions.added)}for(let t=0;t<i.length;t++){var r=p(i[t]);this.applyAdditionalMutationObserverChanges(r,e,this.actions.removed)}},applyAdditionalMutationObserverChanges:function(e,t,n){var i=this.additionalSelectors[t],i=p.isArray(i)?i:[];for(let t=0;t<i.length;t++){var a=i[t],a=this.additionalObservers[a];p.isPlainObject(a)&&this.setupSelectedElement(e,a.selector,n,a.observerType,a.settings,a.data)}},setupSelectedElement:function(t,e,n,i,a,r){let o=this;var c;1<t.length?t.each(function(){o.setupSelectedElement(p(this),e,n,i,a,r)}):t.is(e)?(c=p.extend(!0,{},u.settings,a),(p.isFunction(c.onElementSelection)?c.onElementSelection(t):t).each(function(){o.setupObservableDomElement(p(this),i,a,r)})):(t.find(e).each(function(){o.setupSelectedElement(p(this),e,n,i,a,r)}),t.parents(e).each(function(){o.setupSelectedElement(p(this),e,n,i,a,r)}))},determineChangedElement:function(e,n){let i=this;var a="[data-"+this.marker.activate+"]";if(e.is(a))this.handleChangedElement(e,n);else{let t=e.find(a);0<t.length&&t.each(function(){i.handleChangedElement(t,n)})}},handleChangedElement:function(t,e){this.actions.added===e||this.actions.changed===e?this.evaluate(t):this.actions.removed},normalizeSettings:function(t,e){return t===f.observer?p.extend(!0,{},i.settings,f.settings,e):p.extend(!0,{},i.settings,e)},normalizeData:function(t,e,n){return t===f.observer?p.extend(!0,{},i.data,f.data,n):p.extend(!0,{},i.data,n)},readElementData:function(t){let e;var n=t.data(this.marker.elementData);if("string"==typeof n&&"string"==typeof t.attr("data-"+this.marker.elementData))try{e=JSON.parse(n)}catch(t){e=[]}else e=p.isPlainObject(n)?[n]:p.isArray(n)?n:[];return e},evaluate:function(e){let t=this;var n=e.attr("data-"+b.marker.activate);let i;if("true"===n)i=this.activateObserver;else{if("false"!==n)return;i=this.deactivateObserver}var a=this.readElementData(e);for(let t=0;t<a.length;t++){var r=p.isPlainObject(a[t])?a[t]:{};i.call(this,e,r)}e.attr("data-"+b.marker.activate,"evaluated"),e.find("[data-"+b.marker.activate+"]").each(function(){t.evaluate(p(this))})},activateObserver:function(t,e){var n,i,a=p.isPlainObject(e.settings)?p.extend(!0,{},e.settings):{},r=p.isPlainObject(e.data)?p.extend(!0,{},e.data):{};p.isFunction(a.onActivation)&&(n=r.user,i=r.tags,a.onActivation(a,{$el:t},n,i)),e.observe===f.observer?this.activateClickObserver(t,a,r):e.observe===d.observer?this.activateSubmitObserver(t,a,r):e.observe===g.observer&&this.handleRendered(t,a,r)},handleRendered:function(t,e,n){var i=("string"==typeof e.activityType&&""!==e.activityType?e:g.settings).activityType;this.handleEvent(i,{$el:t,defaultOpenInNewTab:!1,defaultWillReloadPage:!1,overriddenScheduleActivities:!1},t,e,n)},activateSubmitObserver:function(e,n,i){let a=this;e.submit(function(t){a.handleSubmit(t,e,n,i)})},handleSubmit:function(t,e,n,i){var a=("string"==typeof n.activityType&&""!==n.activityType?n:d.settings).activityType;this.handleEvent(a,{$el:e,event:t,defaultOpenInNewTab:!1,defaultWillReloadPage:!1,overriddenScheduleActivities:!1},e,n,i)},activateClickObserver:function(e,n,i){let a=this;e.is("iframe")?(null===this.blurListener&&(this.blurListener=function(e){for(let t=0;t<a.blurElements.length;t++){var n=a.blurElements[t];p(document.activeElement).is(n.$el)&&a.handleClick(e,n.$el,n.settings,n.data)}},window.addEventListener("blur",this.blurListener)),this.blurElements.push({$el:e,settings:n,data:i})):e.click(function(t){a.handleClick(t,e,n,i)})},handleClick:function(t,e,n,i){var a=t.metaKey||t.ctrlKey||2===t.which,r=t.target instanceof HTMLAnchorElement,o=("string"==typeof n.activityType&&""!==n.activityType?n:f.settings).activityType;this.handleEvent(o,{$el:e,event:t,defaultOpenInNewTab:a,defaultWillReloadPage:r,scheduleActivity:!1,overriddenScheduleActivities:!1},e,n,i)},handleEvent:function(e,n,t,i,a){let r=a.user,o=a.tags,c=!0;if(!1!==(c=p.isFunction(i.onBeforeActivitySent)&&"boolean"!=typeof(c=i.onBeforeActivitySent(i,n,r,o))||c)){let t;null===i.scheduleActivities?t=!1!==n.defaultWillReloadPage&&!0!==n.defaultOpenInNewTab:"boolean"==typeof i.scheduleActivities&&(t=i.scheduleActivities||n.overriddenScheduleActivities),!0===(n.scheduleActivity=t)?(Breinify.plugins.activities.scheduleDelayedActivity(r,e,o,6e4),p.isFunction(i.onActivitySent)&&i.onActivitySent(i,n,r,o),p.isFunction(i.onAfterActivitySent)&&i.onAfterActivitySent(i,n,r,o)):!1===t&&(Breinify.plugins.activities.generic(e,r,o,function(){p.isFunction(i.onAfterActivitySent)&&i.onAfterActivitySent(i,n,r,o)}),p.isFunction(i.onActivitySent))&&i.onActivitySent(i,n,r,o)}},deactivateObserver:function(t,e){}};let e=Breinify.plugins._add("activities",{domObserverActive:!1,activateDomObserver:function(){!0!==this.domObserverActive&&(b.init(),this.domObserverActive=!0)},registerAdditionalMutationObserver:function(t,e,n,i,a){return b.registerAdditionalMutationObserver(t,e,n,i,a),this},setupObservableDomElement:function(t,e,n,i){return b.setupObservableDomElement(t,e,n,i),this},generic:function(){let a=this;t.overload({"String,Object":function(t,e){a._send(t,e,{},null)},"String,Object,Object":function(t,e,n){a._send(t,e,n,null)},"String,Object,Object,Function":function(t,e,n,i){a._send(t,e,n,i)}},arguments,this)},pageVisit:function(){let i="pageVisit",a=this;t.overload({"":function(){a._send(i,{},{pageId:window.location.pathname},null)},Function:function(t){a._send(i,{},{pageId:window.location.pathname},t)},"String,Function":function(t,e){a._send(i,{},{pageId:t},e)},String:function(t){a._send(i,{},{pageId:t},null)},"String,Object,Function":function(t,e,n){a._send(i,e,{pageId:t},n)},"String,Object":function(t,e){a._send(i,e,{pageId:t},null)},"Object,Function":function(t,e){a._send(i,{},t,e)},Object:function(t){a._send(i,{},t,null)},"Object,Object,Function":function(t,e,n){a._send(i,t,e,n)},"Object,Object":function(t,e){a._send(i,t,e,null)}},arguments,this)},identify:function(){let i="identify",a=this;t.overload({"Object,Function":function(t,e){a._send(i,t,{},e)},"Object,Object,Function":function(t,e,n){a._send(i,t,e,n)},Object:function(t){a._send(i,t,{},null)},"Object,Object":function(t,e){a._send(i,t,e,null)}},arguments,this)},viewedProduct:function(){t.overload(this._productMethods("viewedProduct"),arguments,this)},addToCart:function(){t.overload(this._productMethods("addToCart"),arguments,this)},removeFromCart:function(){t.overload(this._productMethods("removeFromCart"),arguments,this)},checkOut:function(){let c="checkOut",s=this;t.overload({"String,Array,Object,Object,Array,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Object,Object,Object,Array,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,String,Object,Object,Array,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Array,Object,Object,Object,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Object,Object,Object,Object,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,String,Object,Object,Object,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Array,Object,Object,String,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Object,Object,Object,String,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,String,Object,Object,String,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Array,Object,Array,Object,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,Object,Object,Array,Object,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,String,Object,Array,Object,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,Array,Object,Object,Object,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,Object,Object,Object,Object,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,String,Object,Object,Object,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,Array,Object,Object,String,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,Object,Object,Object,String,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,String,Object,Object,String,Object":function(t,e,n,i,a,r){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r)},"String,Array,Object,Object,Array,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Object,Object,Object,Array,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,String,Object,Object,Array,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Array,Object,Object,Object,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Object,Object,Object,Object,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,String,Object,Object,Object,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Array,Object,Object,String,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Array,Object,Array,Object,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Array,Object,Array,Object,Object,Function":function(t,e,n,i,a,r,o){r=s._mapCheckOutToTags(t,e,n,i,r),s._send(c,a,r,o)},"String,Object,Object,Object,String,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,String,Object,Object,String,Function":function(t,e,n,i,a,r){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t,r)},"String,Array,Object,Array,Object":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,Object,Object,Array,Object":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,String,Object,Array,Object":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,Array,Object,Object,Object":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,Object,Object,Object,Object":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,String,Object,Object,Object":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,Array,Object,Object,String":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,Object,Object,Object,String":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)},"String,String,Object,Object,String":function(t,e,n,i,a){t=s._mapCheckOutToTags(t,e,n,i,{});s._send(c,a,t)}},arguments,this)},scheduleDelayedActivity:function(t,e,n,i,a,r){t={user:t,tags:n,type:e,maxAgeInMs:i,filter:a,timestamp:(new Date).getTime()};return t.tags=this._setPageTags(t.tags),l.store(r,t)},readDelayedActivityData:function(t){return l.get(t)},hasDelayedActivityData:function(e){let t;t="string"==typeof e?function(t){return t===e}:p.isFunction(e)?e:e instanceof RegExp?function(t){return e.test(t)}:function(){return!1};var n=l.getAll();return!(null===n||!p.isPlainObject(n))&&0<p.grep(n,t).length},removeDelayedActivityData:function(t){l.remove(t)},checkDelayedActivityData:function(){let n=this;var t=l.getAll();p.each(t,function(t,e){n._checkDelayedActivityData(t,e)})},_checkDelayedActivityData:function(n,i){if("string"==typeof i.type&&(p.isPlainObject(i.tags)||null==i.tags)&&(p.isPlainObject(i.user)||null==i.user)){var a=(new Date).getTime();if(("number"==typeof i.maxAgeInMs&&0<i.maxAgeInMs?i.timestamp+i.maxAgeInMs:a)<a)this.removeDelayedActivityData(n);else{var a=i.filter,r="string"==typeof a?a.split("::"):[];let t,e;if(2<=r.length){e=Breinify.plugins[r[0]];for(var o=1;o<r.length-1;o++)e=p.isPlainObject(e)?e[r[o]]:null;t=r[r.length-1]}else t=1===r.length?(e=window,r[0]):e=null;if("object"!=typeof e||"string"!=typeof t||null===e)this._send(i.type,i.user,i.tags),this.removeDelayedActivityData(n);else if(p.isFunction(e[t])){let a=this;e[t].apply(e,[n,i,function(t,e,n,i){!0===n?(a._send(e.type,e.user,e.tags),a.removeDelayedActivityData(t)):!0===i&&a.removeDelayedActivityData(t)}])}}}},_productMethods:function(a){let r=this;return{"Array,Function":function(t,e){t=r._mapProductsToTags(t);r._send(a,{},t,e)},"Object,Function":function(t,e){t=r._mapProductsToTags(t);r._send(a,{},t,e)},"String,Function":function(t,e){t=r._mapProductsToTags(t);r._send(a,{},t,e)},String:function(t){t=r._mapProductsToTags(t);r._send(a,{},t,null)},Array:function(t){t=r._mapProductsToTags(t);r._send(a,{},t,null)},Object:function(t){t=r._mapProductsToTags(t);r._send(a,{},t,null)},"String,Object,Function":function(t,e,n){t=r._mapProductsToTags(t);r._send(a,e,t,n)},"Array,Object,Function":function(t,e,n){t=r._mapProductsToTags(t);r._send(a,e,t,n)},"Object,Object,Function":function(t,e,n){t=r._mapProductsToTags(t);r._send(a,e,t,n)},"String,Object":function(t,e){t=r._mapProductsToTags(t);r._send(a,e,t,null)},"Array,Object":function(t,e){t=r._mapProductsToTags(t);r._send(a,e,t,null)},"Object,Object":function(t,e){t=r._mapProductsToTags(t);r._send(a,e,t,null)},"String,Object,Object,Function":function(t,e,n,i){n=r._mapProductsToTags(t,n),r._send(a,e,n,i)},"Array,Object,Object,Function":function(t,e,n,i){n=r._mapProductsToTags(t,n),r._send(a,e,n,i)},"Object,Object,Object,Function":function(t,e,n,i){n=r._mapProductsToTags(t,n),r._send(a,e,n,i)},"String,Object,Object":function(t,e,n){n=r._mapProductsToTags(t,n),r._send(a,e,n,null)},"Array,Object,Object":function(t,e,n){n=r._mapProductsToTags(t,n),r._send(a,e,n,null)},"Object,Object,Object":function(t,e,n){n=r._mapProductsToTags(t,n),r._send(a,e,n,null)}}},_mapCheckOutToTags:function(t,e,n,i,a){return a=this._mapProductsToTags(e,a),a=this._mapPromotionsToTags(i,a),p.isPlainObject(n)&&(e=Breinify.UTL.toPrice(n.total),a.transactionPriceTotal=Breinify.UTL.toPrice(n.priceTotal),a.transactionTaxTotal=Breinify.UTL.toPrice(n.taxTotal),a.transactionDiscountTotal=Breinify.UTL.toPrice(n.discountTotal),a.transactionMiscTotal=Breinify.UTL.toPrice(n.miscTotal),a.transactionTotal=null!==e?e:a.transactionPriceTotal+a.transactionTaxTotal+a.transactionMiscTotal-a.transactionDiscountTotal),a.transactionId=t,a},_mapProductsToTags:function(r,t){if(p.isPlainObject(r))return this._mapProductsToTags([r],t);if("string"==typeof r)return this._mapProductsToTags([{id:r}],t);if(null==r)return t;if(!p.isArray(r))throw new Error(v+"The defined `products` are invalid: "+JSON.stringify(r));var e=r.length;let o=0<e,c=0<e,s=0<e,l=0<e,u=0<e;for(var n,d=[],g=[],f=[],b=[],h=[],O=0;O<e;O++){var y=r[O];let t=null,e=null,n=null,i=null,a=null;"string"==typeof y?t=y:p.isPlainObject(y)&&(t="string"==typeof y.id?y.id.trim():null,e="number"==typeof y.quantity?y.quantity:null,n="number"==typeof y.price?y.price:null,i="string"==typeof y.category?y.category.trim():null,a="string"==typeof y.name?y.name.trim():null),s=s&&!Breinify.UTL.isEmpty(t),o=o&&!Breinify.UTL.isEmpty(e),c=c&&!Breinify.UTL.isEmpty(n),l=l&&!Breinify.UTL.isEmpty(i),u=u&&!Breinify.UTL.isEmpty(a),f.push(t),g.push(n),d.push(e),b.push(i),h.push(a)}if(s)return n={},o&&(n.productQuantities=d),c&&(n.productPrices=g),s&&(n.productIds=f),u&&(n.productNames=h),l&&(n.productCategories=b),p.extend(!0,{},t,n);throw new Error("Products must have an identifier: "+JSON.stringify(r))},_mapPromotionsToTags:function(n,t){if(p.isPlainObject(n))return this._mapPromotionsToTags([n],t);if("string"==typeof n)return this._mapPromotionsToTags([{id:n}],t);if(null==n)return t;if(!p.isArray(n))throw new Error(v+"The defined `promotions` are invalid: "+JSON.stringify(n));if(0===n.length)return t;var e=n.length;let i=0<e,a=0<e;for(var r=[],o=[],c=0;c<e;c++){var s=n[c];let t=null,e=null;"string"==typeof s?t=s:p.isPlainObject(s)&&(t="string"==typeof s.id?s.id.trim():null,e="number"==typeof s.amount?s.amount:null),i=i&&!Breinify.UTL.isEmpty(t),a=a&&!Breinify.UTL.isEmpty(e),o.push(t),r.push(e)}if(i)return p.extend(!0,{},t,{promotionIds:i?o:null,promotionAmounts:a?r:null});throw new Error("Promotions must have an identifier: "+JSON.stringify(n))},_extendTags:function(t,e){var n=this.getConfig("tagsExtender",function(){return{}});return p.isPlainObject(e)||(e={}),null!==n&&p.isFunction(n)?p.extend({},n(t),e):p.extend({},e)},_setPageTags:function(t){return(t=p.isPlainObject(t)?t:{}).pageId=null===Breinify.UTL.isNonEmptyString(t.pageId)?window.location.pathname:t.pageId,t.pageUrl=null===Breinify.UTL.isNonEmptyString(t.pageUrl)?window.location.href:t.pageUrl,t.title=(null===Breinify.UTL.isNonEmptyString(t.title)?document:t).title,t},_send:function(t,n,i,a){n=Breinify.UTL.user.create(n),(i=this._extendTags(t,i)).id="string"==typeof i.id?i.id:Breinify.UTL.uuid(),i.originId=o,i=this._setPageTags(i),Breinify.activity(n,t,null,null,i,function(t,e){"function"==typeof a&&("string"==typeof e?a(new Error(r+e)):a(null,{user:n,tags:i}))});var e=this.getConfig("googleAnalytics",{enabled:!1});p.isPlainObject(e)&&!0===e.enabled&&s.handle(e,{user:n,type:t,tags:i})}});Breinify.onReady(function(){e.checkDelayedActivityData()})}})();