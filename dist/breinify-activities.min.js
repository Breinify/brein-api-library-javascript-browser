(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("activities")){let y=Breinify.UTL._jquery(),t=Breinify.plugins._overload(),j=Breinify.UTL.constants.errors.prefix.validation,c=Breinify.UTL.constants.errors.prefix.api,o=Breinify.UTL.uuid(),a=function(t,n){if("ga"!==t.type)throw new Error("Using currently unavailable type: "+t.type);return{hitType:"event",eventCategory:"breinify",eventAction:n.type,eventLabel:n.tags.id,eventValue:1}},s={initialized:!1,type:null,instance:null,mapper:null,init:function(e,i){let r=this;if(!0===this.initialized)i(!0);else{let n=this._determineType(e.type);switch(n){case"ga":this._waitForInstance("ga",function(t){ga(function(){r.type=n,r.instance=r._determineGaInstance(ga.getAll(),e.trackerId),r.mapper=y.isFunction(e.mapper)?e.mapper:a,r.initialized=!0,i(r.initialized)})});break;case"gtag":r.type=n,r.initialized=!0,i(r.initialized);break;default:throw new Error("Using currently unavailable type: "+n)}}},handle:function(t,n){let e=this;this.init(t,function(t){if(!1!==t){t=e.mapper(e,n);if(null!==t){if("ga"!==e.type)throw new Error("Using currently unavailable type: "+gaType);e.instance.send(t)}}})},_waitForInstance:function(n,e,i){var t=window[n];if(null!=t)e(t);else if(5e3<=i)console.error(n+" enabled but not available (waited "+i+" [ms]).");else{let t=this;setTimeout(function(){t._waitForInstance(n,e,("number"==typeof i?i:0)+50)},50)}},_determineGaInstance:function(t,n){var e="string"==typeof n?n:null;if(!y.isArray(t)||t.length<0)throw new Error("Unable to determine instance.");if(1===t.length&&null===e)return t[0];for(var i=0;i<t.length;i++)if(t[i].get("trackingId")===e)return t[i];throw null===e?new Error("Please specify trackingId of trackers to be used, found: "+t.length):new Error("Unable to determine instance with trackingId: "+e)},_determineType:function(t){t="string"==typeof t?t.toLowerCase():null;if("ga"===t||"gtag"===t)return t;if("function"==typeof window.ga)return"ga";if("function"==typeof window.gtag)return"gtag";throw new Error("Unable to determine type, please specify.")},_applyDefaultMapping:function(t){return a(this,t)}};const e={store:function(t,n){var e=Breinify.UTL.cookies.delayedActivities;let i={};Breinify.UTL.cookie.check(e)&&(i=Breinify.UTL.cookie.getJson(e));t="string"==typeof t?t:Breinify.UTL.uuid(),i[t]=n,n=Breinify.UTL.cookie.domain();return Breinify.UTL.cookie.setJson(e,i,null,!0,n),t},getAll:function(){var t=Breinify.UTL.cookies.delayedActivities;return Breinify.UTL.cookie.getJson(t)},get:function(t){var n=this.getAll();return y.isPlainObject(n)&&y.isPlainObject(n[t])?n[t]:null},remove:function(t){var n=Breinify.UTL.cookie.domain(),e=Breinify.UTL.cookies.delayedActivities,i=Breinify.UTL.cookie.getJson(e);delete i[t],Breinify.UTL.cookie.setJson(e,i,null,!0,n)}},i={prefix:"br-scheduled-activity-",store:function(t,n){window.localStorage.setItem(this.prefix+t,JSON.stringify(n))},getAll:function(){let t=null;for(var n=0,e=window.localStorage.length;n<e;++n){var i,r=window.localStorage.key(n);0!==!r.indexOf(this.prefix)&&(r=r.substring(this.prefix.length),null!==(i=this.get(r)))&&((t=null===t?{}:t)[r]=i)}return t},get:function(t){t=window.localStorage.getItem(this.prefix+t);return"string"==typeof t?JSON.parse(t):null},remove:function(t){window.localStorage.removeItem(this.prefix+t)}};let u;try{window.localStorage.setItem("br-local-storage-test","true"),window.localStorage.removeItem("br-local-storage-test"),u=i}catch(t){u=e}let n=Breinify.plugins._add("activities",{marker:{observer:{activate:"brob-active"}},domObserverActive:!1,activateDomObserver:function(){!0!==this.domObserverActive&&(Breinify.UTL.dom.addModification("activities::activateDomObserver",{selector:"[data-"+this.marker.observer.activate+"]",modifier:function(t){t.each(function(){var t=y(this);console.log("observing",t)})}}),this.domObserverActive=!0)},generic:function(){let r=this;t.overload({"String,Object":function(t,n){r._send(t,n,{},null)},"String,Object,Object":function(t,n,e){r._send(t,n,e,null)},"String,Object,Object,Function":function(t,n,e,i){r._send(t,n,e,i)}},arguments,this)},pageVisit:function(){let i="pageVisit",r=this;t.overload({"":function(){r._send(i,{},{pageId:window.location.pathname},null)},Function:function(t){r._send(i,{},{pageId:window.location.pathname},t)},"String,Function":function(t,n){r._send(i,{},{pageId:t},n)},String:function(t){r._send(i,{},{pageId:t},null)},"String,Object,Function":function(t,n,e){r._send(i,n,{pageId:t},e)},"String,Object":function(t,n){r._send(i,n,{pageId:t},null)},"Object,Function":function(t,n){r._send(i,{},t,n)},Object:function(t){r._send(i,{},t,null)},"Object,Object,Function":function(t,n,e){r._send(i,t,n,e)},"Object,Object":function(t,n){r._send(i,t,n,null)}},arguments,this)},identify:function(){let i="identify",r=this;t.overload({"Object,Function":function(t,n){r._send(i,t,{},n)},"Object,Object,Function":function(t,n,e){r._send(i,t,n,e)},Object:function(t){r._send(i,t,{},null)},"Object,Object":function(t,n){r._send(i,t,n,null)}},arguments,this)},viewedProduct:function(){t.overload(this._productMethods("viewedProduct"),arguments,this)},addToCart:function(){t.overload(this._productMethods("addToCart"),arguments,this)},removeFromCart:function(){t.overload(this._productMethods("removeFromCart"),arguments,this)},checkOut:function(){let a="checkOut",s=this;t.overload({"String,Array,Object,Object,Array,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Object,Object,Object,Array,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,String,Object,Object,Array,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Array,Object,Object,Object,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Object,Object,Object,Object,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,String,Object,Object,Object,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Array,Object,Object,String,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Object,Object,Object,String,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,String,Object,Object,String,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Array,Object,Array,Object,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,Object,Object,Array,Object,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,String,Object,Array,Object,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,Array,Object,Object,Object,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,Object,Object,Object,Object,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,String,Object,Object,Object,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,Array,Object,Object,String,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,Object,Object,Object,String,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,String,Object,Object,String,Object":function(t,n,e,i,r,c){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c)},"String,Array,Object,Object,Array,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Object,Object,Object,Array,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,String,Object,Object,Array,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Array,Object,Object,Object,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Object,Object,Object,Object,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,String,Object,Object,Object,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Array,Object,Object,String,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Array,Object,Array,Object,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Array,Object,Array,Object,Object,Function":function(t,n,e,i,r,c,o){c=s._mapCheckOutToTags(t,n,e,i,c),s._send(a,r,c,o)},"String,Object,Object,Object,String,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,String,Object,Object,String,Function":function(t,n,e,i,r,c){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t,c)},"String,Array,Object,Array,Object":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,Object,Object,Array,Object":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,String,Object,Array,Object":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,Array,Object,Object,Object":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,Object,Object,Object,Object":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,String,Object,Object,Object":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,Array,Object,Object,String":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,Object,Object,Object,String":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)},"String,String,Object,Object,String":function(t,n,e,i,r){t=s._mapCheckOutToTags(t,n,e,i,{});s._send(a,r,t)}},arguments,this)},scheduleDelayedActivity:function(t,n,e,i,r,c){t={user:t,tags:e,type:n,maxAgeInMs:i,filter:r,timestamp:(new Date).getTime()};return u.store(c,t)},readDelayedActivityData:function(t){return u.get(t)},hasDelayedActivityData:function(n){let t;t="string"==typeof n?function(t){return t===n}:y.isFunction(n)?n:n instanceof RegExp?function(t){return n.test(t)}:function(){return!1};var e=u.getAll();return!(null===e||!y.isPlainObject(e))&&0<y.grep(e,t).length},removeDelayedActivityData:function(t){u.remove(t)},checkDelayedActivityData:function(){let e=this;var t=u.getAll();y.each(t,function(t,n){e._checkDelayedActivityData(t,n)})},_checkDelayedActivityData:function(e,i){if("string"==typeof i.type&&(y.isPlainObject(i.tags)||null==i.tags)&&(y.isPlainObject(i.user)||null==i.user)){var r=(new Date).getTime();if(("number"==typeof i.maxAgeInMs&&0<i.maxAgeInMs?i.timestamp+i.maxAgeInMs:r)<r)this.removeDelayedActivityData(e);else{var r=i.filter,c="string"==typeof r?r.split("::"):[];let t,n;if(2<=c.length){n=Breinify.plugins[c[0]];for(var o=1;o<c.length-1;o++)n=y.isPlainObject(n)?n[c[o]]:null;t=c[c.length-1]}else t=1===c.length?(n=window,c[0]):n=null;if("object"!=typeof n||"string"!=typeof t||null===n)this._send(i.type,i.user,i.tags),this.removeDelayedActivityData(e);else if(y.isFunction(n[t])){let r=this;n[t].apply(n,[e,i,function(t,n,e,i){!0===e?(r._send(n.type,n.user,n.tags),r.removeDelayedActivityData(t)):!0===i&&r.removeDelayedActivityData(t)}])}}}},_productMethods:function(r){let c=this;return{"Array,Function":function(t,n){t=c._mapProductsToTags(t);c._send(r,{},t,n)},"Object,Function":function(t,n){t=c._mapProductsToTags(t);c._send(r,{},t,n)},"String,Function":function(t,n){t=c._mapProductsToTags(t);c._send(r,{},t,n)},String:function(t){t=c._mapProductsToTags(t);c._send(r,{},t,null)},Array:function(t){t=c._mapProductsToTags(t);c._send(r,{},t,null)},Object:function(t){t=c._mapProductsToTags(t);c._send(r,{},t,null)},"String,Object,Function":function(t,n,e){t=c._mapProductsToTags(t);c._send(r,n,t,e)},"Array,Object,Function":function(t,n,e){t=c._mapProductsToTags(t);c._send(r,n,t,e)},"Object,Object,Function":function(t,n,e){t=c._mapProductsToTags(t);c._send(r,n,t,e)},"String,Object":function(t,n){t=c._mapProductsToTags(t);c._send(r,n,t,null)},"Array,Object":function(t,n){t=c._mapProductsToTags(t);c._send(r,n,t,null)},"Object,Object":function(t,n){t=c._mapProductsToTags(t);c._send(r,n,t,null)},"String,Object,Object,Function":function(t,n,e,i){e=c._mapProductsToTags(t,e),c._send(r,n,e,i)},"Array,Object,Object,Function":function(t,n,e,i){e=c._mapProductsToTags(t,e),c._send(r,n,e,i)},"Object,Object,Object,Function":function(t,n,e,i){e=c._mapProductsToTags(t,e),c._send(r,n,e,i)},"String,Object,Object":function(t,n,e){e=c._mapProductsToTags(t,e),c._send(r,n,e,null)},"Array,Object,Object":function(t,n,e){e=c._mapProductsToTags(t,e),c._send(r,n,e,null)},"Object,Object,Object":function(t,n,e){e=c._mapProductsToTags(t,e),c._send(r,n,e,null)}}},_mapCheckOutToTags:function(t,n,e,i,r){return r=this._mapProductsToTags(n,r),r=this._mapPromotionsToTags(i,r),y.isPlainObject(e)&&(r.transactionPriceTotal="number"==typeof e.priceTotal?e.priceTotal:0,r.transactionTaxTotal="number"==typeof e.taxTotal?e.taxTotal:0,r.transactionDiscountTotal="number"==typeof e.discountTotal?e.discountTotal:0,r.transactionMiscTotal="number"==typeof e.miscTotal?e.miscTotal:0,r.transactionTotal="number"==typeof e.total?e.total:r.transactionPriceTotal+r.transactionTaxTotal+r.transactionMiscTotal-r.transactionDiscountTotal),r.transactionId=t,r},_mapProductsToTags:function(c,t){if(y.isPlainObject(c))return this._mapProductsToTags([c],t);if("string"==typeof c)return this._mapProductsToTags([{id:c}],t);if(null==c)return t;if(!y.isArray(c))throw new Error(j+"The defined `products` are invalid: "+JSON.stringify(c));var n=c.length;let o=0<n,a=0<n,s=0<n,u=0<n,l=0<n;for(var e,g=[],f=[],d=[],O=[],b=[],p=0;p<n;p++){var T=c[p];let t=null,n=null,e=null,i=null,r=null;"string"==typeof T?t=T:y.isPlainObject(T)&&(t="string"==typeof T.id?T.id.trim():null,n="number"==typeof T.quantity?T.quantity:null,e="number"==typeof T.price?T.price:null,i="string"==typeof T.category?T.category.trim():null,r="string"==typeof T.name?T.name.trim():null),s=s&&!Breinify.UTL.isEmpty(t),o=o&&!Breinify.UTL.isEmpty(n),a=a&&!Breinify.UTL.isEmpty(e),u=u&&!Breinify.UTL.isEmpty(i),l=l&&!Breinify.UTL.isEmpty(r),d.push(t),f.push(e),g.push(n),O.push(i),b.push(r)}if(s)return e={},o&&(e.productQuantities=g),a&&(e.productPrices=f),s&&(e.productIds=d),l&&(e.productNames=b),u&&(e.productCategories=O),y.extend(!0,{},t,e);throw new Error("Products must have an identifier: "+JSON.stringify(c))},_mapPromotionsToTags:function(e,t){if(y.isPlainObject(e))return this._mapPromotionsToTags([e],t);if("string"==typeof e)return this._mapPromotionsToTags([{id:e}],t);if(null==e)return t;if(!y.isArray(e))throw new Error(j+"The defined `promotions` are invalid: "+JSON.stringify(e));if(0===e.length)return t;var n=e.length;let i=0<n,r=0<n;for(var c=[],o=[],a=0;a<n;a++){var s=e[a];let t=null,n=null;"string"==typeof s?t=s:y.isPlainObject(s)&&(t="string"==typeof s.id?s.id.trim():null,n="number"==typeof s.amount?s.amount:null),i=i&&!Breinify.UTL.isEmpty(t),r=r&&!Breinify.UTL.isEmpty(n),o.push(t),c.push(n)}if(i)return y.extend(!0,{},t,{promotionIds:i?o:null,promotionAmounts:r?c:null});throw new Error("Promotions must have an identifier: "+JSON.stringify(e))},_extendTags:function(t,n){var e=this.getConfig("tagsExtender",function(){return{}});return y.isPlainObject(n)||(n={}),null!==e&&y.isFunction(e)?y.extend({},e(t),n):y.extend({},n)},_send:function(t,e,i,r){e=Breinify.UTL.user.create(e),(i=this._extendTags(t,i)).id="string"==typeof i.id?i.id:Breinify.UTL.uuid(),i.originId=o,Breinify.activity(e,t,null,null,i,function(t,n){"function"==typeof r&&("string"==typeof n?r(new Error(c+n)):r(null,{user:e,tags:i}))});var n=this.getConfig("googleAnalytics",{enabled:!1});y.isPlainObject(n)&&!0===n.enabled&&s.handle(n,{user:e,type:t,tags:i})}});Breinify.onReady(function(){n.checkDelayedActivityData()})}})();