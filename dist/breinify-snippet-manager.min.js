(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("snippetManager")){let f=Breinify.UTL._jquery(),l={snippets:{},observers:{},register:function(e,n){var t=this.snippets[e];return this.snippets[e]=n,this._notify(e,n),f.isPlainObject(t)?t:null},get:function(e){e=this.snippets[e];return"string"==typeof e?Breinify.UTL.isNonEmptyString(e)?e:null:f.isFunction(e)?e:null},observe:function(n,t){if(Breinify.UTL.isNonEmptyString(n)&&f.isFunction(t)){let e=this.snippets[n];void 0!==e?setTimeout(function(){t(n,e)},0):(f.isArray(this.observers[n])||(this.observers[n]=[]),this.observers[n].push(t))}},inject:function(e,r,o){var n=this.get(e);if(Breinify.UTL.isNonEmptyString(n)&&!f.isFunction(n)){let i=f(n);if(0!==i.length){let t=Breinify.UTL.isNonEmptyString(i.attr("id"));if(null===t&&(t="br-"+e,i.attr("id",t)),!document.getElementById(t)){let n="append"===o?"append":"prepend";this._waitForTarget(r,function(e){document.getElementById(t)||e[n](i)},5e3)}}}},_waitForTarget:function(c,u,e){if(f.isFunction(u)){let i="number"==typeof e&&0<e?e:5e3,r=Date.now(),o=!1,s=function(){var e;return c&&"body"!==c&&"BODY"!==c?"head"===c||"HEAD"===c?document.head?f("head"):null:c&&c.jquery?0<c.length?c:Breinify.UTL.isNonEmptyString(c.selector)&&0<(e=f(c.selector)).length?e:null:(e=l._resolveTarget(c))&&0<e.length?e:null:document.body?f("body"):null};e=s();if(e)u(e);else{let n=function(){try{Breinify&&Breinify.config&&!0===Breinify.config.debug&&window.console&&console.warn&&console.warn("snippetManager: target not found within timeout",{target:c,timeoutMs:i})}catch(e){}},t=new MutationObserver(function(){var e;o||((e=s())?(o=!0,t.disconnect(),u(e)):Date.now()-r>=i&&(o=!0,t.disconnect(),n()))});t.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout(function(){if(!o){o=!0;try{t.disconnect()}catch(e){}n()}},i+50)}}},_resolveTarget:function(e){return e&&e.jquery?e:Breinify.UTL.dom.isNodeType(e,1)||Breinify.UTL.isNonEmptyString(e)?f(e):f("body")},_notify:function(n,t){var i=this.observers[n];if(f.isArray(i)&&0!==i.length){delete this.observers[n];for(let e=0;e<i.length;e++){var r=i[e];try{r(n,t)}catch(e){window.console&&console.error&&console.error("snippetManager observer error for",n,e)}}}}};Breinify.plugins._add("snippetManager",{registerSnippet:function(e,n){l.register(e,n)},getSnippet:function(e){return l.get(e)},injectSnippet:function(e,n,t){this.onSnippetRegistered(e,function(){l.inject(e,n,t)})},onSnippetRegistered:function(e,n){l.observe(e,n)}})}})();