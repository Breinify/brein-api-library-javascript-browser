"use strict";!function(){if("object"==typeof Breinify&&!Breinify.plugins._isAdded("assets")){var a=Breinify.UTL._jquery(),b=Breinify.plugins._overload(),c=Breinify.UTL.constants.errors.prefix.assets,d={resultCache:{},textResource:function(b,d){a.getJSON("https://assets.breinify.com/frame/"+b,function(a){d(null,a)}).fail(function(a,e,f){d({error:c+' Unable to retrieve resource from "'+b+'"',textStatus:e,responseText:a.responseText})})},determineTextResourceValue:function(b,c,d,e,f){if("string"!=typeof d||""===d.trim())e(null,null);else if(a.isPlainObject(this.resultCache[b]))this.extractResource(f,c,d,this.resultCache[b],e);else{var g=this;this.textResource(b,function(a,h){null===a?(g.resultCache[b]=h,g.extractResource(f,c,d,h,e)):e(null,null)})}},registerNamedResourcesImgObserver:function(){var a=this;Breinify.UTL.dom.addModification("assets::namedResourcesImgObserver",{selector:'img[data-frameId][data-resourceType][data-resourceId][data-frameLoaded!="true"]',modifier:function(b){var c=b.attr("data-frameId"),d=b.attr("data-resourceType"),e=b.attr("data-resourceId"),f=b.attr("data-fallbackSrc");a.determineTextResourceValue(c,d,e,function(a,c){"string"==typeof a&&""!==a.trim()?b.attr("src",a):"string"==typeof f&&""!==f.trim()?b.attr("src",f):b.attr("src",""),""!==b.attr("src").trim()&&b.attr("data-frameLoaded","true").show()})}})},extractResource:function(b,c,d,e,f){var g,h=Math.floor(("number"==typeof b?b:(new Date).getTime())/1e3);if(a.isPlainObject(e.themes)){for(var i=null,j=Object.keys(e.themes),k=0,l=j.length;k<l;k++){var m=e.themes[j[k]],n="number"==typeof m.start?m.start:null,o="number"==typeof m.end?m.end:null;if(null===n);else if(h>=n&&(null===o||h<o)){i=j[k];break}}if(g=e.fallbackThemes,g=a.isArray(g)?g:[],null!==i)g=[i].concat(g);else if(0===g.length)return void f(null,null)}else g=[null];for(var p=0,q=g.length;p<q;p++){var r=g[p],s=null===r?e:e.themes[r];if(a.isPlainObject(s)){var t=s[c];if(a.isPlainObject(t)){var u=t[d];if("string"==typeof u&&""!==u.trim())return void f(u,r)}}}f(null,null)}},e={observeNamedResourceDomElements:function(b){b=a.extend({imgObserver:this.getConfig("observeImages",!1)},b),b.imgObserver===!0&&d.registerNamedResourcesImgObserver()},textResource:function(){b.overload({"String,Function":function(a,b){d.textResource(a,b)},"String,String,String,Function,Number":function(a,b,c,e,f){d.determineTextResourceValue(a,b,c,e,f)}},arguments,this)}},f=Breinify.plugins._add("assets",e);Breinify.onReady(function(){f.observeNamedResourceDomElements()})}}();