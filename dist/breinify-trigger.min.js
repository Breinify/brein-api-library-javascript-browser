(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("trigger")){let d=Breinify.UTL._jquery(),e={domTreeObserver:null,domTreeDependModules:null,oldPushState:null,oldReplaceState:null,popStateListener:null,observeDomTreeChanges:function(){let s=this;null===this.domTreeObserver&&(this.domTreeObserver=new MutationObserver(t=>{for(let e=0;e<t.length;e++){var n=t[e],i=n.attributeName,o=t[e].addedNodes,a=t[e].removedNodes;"string"==typeof i&&""!==i.trim()&&s.handleDomChange(d(n.target),{type:"attribute-change",attribute:i});for(let e=0;e<o.length;e++){var r=o[e];s.handleDomChange(d(r),{type:"added-element"})}for(let e=0;e<a.length;e++){var l=a[e];s.handleDomChange(d(l),{type:"removed-element"})}}}),this.domTreeObserver.observe(d("body").get(0),{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}))},observeUrlChanges:function(){let n=this;null===n.oldPushState&&null===n.oldReplaceState&&null===n.popStateListener&&("object"!=typeof window.history?console.error("unable to observe history changes, disabling trigger observation"):(this.handlePageChange(),d(document).on("module-added",function(t,e){try{n.checkModule(t,e)}catch(e){console.error("failed to check module: "+t)}}),d.isFunction(window.history.pushState)&&(n.oldPushState=window.history.pushState,window.history.pushState=function(){var e=n.oldPushState.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),n.handlePageChange(),e}),d.isFunction(window.history.replaceState)&&(n.oldReplaceState=window.history.replaceState,window.history.replaceState=function(){var e=n.oldReplaceState.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),n.handlePageChange(),e}),n.popStateListener=function(){n.handlePageChange()},window.addEventListener("popstate",n.popStateListener)))},handlePageChange:function(){let n=this;try{var e=Breinify.plugins.api,t=d.isPlainObject(e)?e.modules:{};n.domTreeDependModules={},d.each(t,function(t,e){try{n.checkModule(t,e)}catch(e){console.error("failed to check module: "+t)}})}catch(e){console.error("failed to trigger ready",e)}},handleDomChange:function(i,e){let o=this;if(d.isPlainObject(this.domTreeDependModules)){let n=d.isPlainObject(e)?d.extend(!0,{type:"undefined"},e):{};d.each(this.domTreeDependModules,function(e,t){o.executeOnChange(t,i,n)})}},checkModule:function(e,t){d.isPlainObject(t)&&d.isFunction(t.onChange)&&(d.isFunction(t.isValidPage)&&!t.isValidPage(window.location.pathname)||(d.isFunction(t.findRequirements)||this.executeOnChange(t),void 0===this.domTreeDependModules[e]&&(this.executeOnChange(t,d("body"),{type:"full-scan"}),this.domTreeDependModules[e]=t)))},executeOnChange:function(e,t,n){d.isPlainObject(e)&&d.isFunction(e.onChange)&&(d.isFunction(e.findRequirements)?null!==(t=e.findRequirements(t,n))&&!1!==t&&void 0!==t&&(d.isPlainObject(t)?e.onChange(t):t instanceof d&&0<t.length?e.onChange({$requirements:t}):!0===t&&e.onChange({})):e.onChange({}))}};let t=Breinify.plugins._add("trigger",{init:function(){e.observeDomTreeChanges(),e.observeUrlChanges()}});Breinify.onReady(function(){t.init()})}})();