(()=>{if("object"==typeof Breinify&&!Breinify.plugins._isAdded("uiSurvey")){let o="br-ui-survey",n="br-ui-survey-popup",u=Breinify.UTL._jquery();class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._renderBase()}_renderBase(){0<this.shadowRoot.childNodes.length||(this.shadowRoot.innerHTML=`
                <style>
                    :host {
                        display: none;
                        position: fixed;
                        inset: 0;
                        z-index: 2147483647; /* very high to be above most things */
                        font-family: inherit;
                    }

                    :host([open]) { display: block; }

                    .br-ui-survey-popup__backdrop {
                        position: fixed;
                        inset: 0;
                        background: rgba(0, 0, 0, 0.45);
                    }

                    .br-ui-survey-popup__outer {
                        position: fixed;
                        inset: 0;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        pointer-events: none;
                    }

                    .br-ui-survey-popup__dialog {
                        pointer-events: auto;
                        max-width: 520px;
                        width: calc(100% - 2rem);
                        max-height: calc(100% - 4rem);
                        background: #fff;
                        border-radius: 12px;
                        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.25);
                        overflow: hidden;
                        display: flex;
                        flex-direction: column;
                    }

                    .br-ui-survey-popup__header {
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        padding: 0.5rem 0.75rem;
                        border-bottom: 1px solid #eee;
                    }
                    
                    .br-ui-survey-popup__footer {
                        padding: 0.75rem 1rem;
                        border-top: 1px solid #eee;
                        display: flex;
                        align-items: center;
                        justify-content: flex-end;
                        gap: 0.5rem;
                    }

                    .br-ui-survey-popup__close-btn {
                        border: none;
                        background: transparent;
                        cursor: pointer;
                        font-size: 1.25rem;
                        line-height: 1;
                        padding: 0.25rem 0.5rem;
                    }

                    .br-ui-survey-popup__body { padding: 1rem 1.25rem 1.25rem; overflow: auto; }

                    .br-ui-survey-popup__placeholder {
                        font-size: 0.95rem;
                        color: #666;
                        text-align: center;
                    }
                </style>

                <div class="br-ui-survey-popup__backdrop" part="backdrop"></div>
                <div class="br-ui-survey-popup__outer">
                    <div class="br-ui-survey-popup__dialog" role="dialog" aria-modal="true">
                        <div class="br-ui-survey-popup__header">
                            <button type="button" class="br-ui-survey-popup__close-btn" aria-label="Close survey">
                                &times;
                            </button>
                        </div>
                        <div class="br-ui-survey-popup__body">
                            <div class="br-ui-survey-popup__placeholder">
                                Survey content will appear hereâ€¦
                            </div>
                        </div>
                        <div class="br-ui-survey-popup__footer">
                            <!-- Navigation and CTA controls will go here -->
                        </div>
                    </div>
                </div>
            `,this._bindBaseEvents())}_bindBaseEvents(){var e=this.shadowRoot.querySelector(".br-ui-survey-popup__backdrop"),i=this.shadowRoot.querySelector(".br-ui-survey-popup__close-btn");e&&e.addEventListener("click",()=>this.close()),i&&i.addEventListener("click",()=>this.close())}open(){this.hasAttribute("open")||this.setAttribute("open","");var e=this.shadowRoot.querySelector(".br-ui-survey-popup__dialog");e&&"function"==typeof e.focus&&(e.setAttribute("tabindex","-1"),e.focus())}close(){this.hasAttribute("open")&&this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("br-ui-survey:popup-closed",{bubbles:!0,cancelable:!1}))}}class d extends HTMLElement{$shadowRoot=null;settings=null;uuid=null;constructor(){super(),this.attachShadow({mode:"open"}),this.uuid=null,this.$shadowRoot=u(this.shadowRoot),this.settings={}}_ensureBaseStyle(){var e="br-ui-survey-style";0<this.$shadowRoot.find("#"+e).length||this.$shadowRoot.append(u(`<style id="${e}">
                :host {
                    display: block;
                    box-sizing: border-box;
                    font-family: inherit;
                    color: inherit;
                }
            
                *, *::before, *::after { box-sizing: border-box; }
            
                .br-ui-survey-root { width: 100%; }
                .br-ui-survey-container { width: 100%; }
                .br-ui-survey-hidden { display: none !important; }
            
                /* -------------------------------------------------- */
                /* Trigger banner styling (desktop + mobile)          */
                /* -------------------------------------------------- */
                .br-ui-survey-trigger {
                    display: inline-block;
                    cursor: pointer;
                    width: 100%;
                }
            
                .br-ui-survey-trigger-image { width: 100%; height: auto; border: 0; }
                .br-ui-survey-trigger-image.br-ui-survey-desktop { display: block; }
                .br-ui-survey-trigger-image.br-ui-survey-mobile { display: none; }
            
                @media (max-width: 600px) {
                    .br-ui-survey-trigger-image.br-ui-survey-desktop { display: none; }
                    .br-ui-survey-trigger-image.br-ui-survey-mobile { display: block; }
                }
            </style>`))}_createTrigger(){var e=this.settings&&this.settings.trigger||{},i=e.bannerUrl,e=e.mobileBannerUrl||i,r=u("<div/>",{class:"br-ui-survey-trigger",role:"button",tabindex:0,"aria-label":"Start survey"});return i&&r.append(u('<img src="'+i+'" class="br-ui-survey-trigger-image" alt="Start survey"/>').addClass("br-ui-survey-desktop")),e&&r.append(u('<img src="'+e+'" class="br-ui-survey-trigger-image" alt="Start survey"/>').addClass("br-ui-survey-mobile")),r.on("click",e=>{e.preventDefault(),this._openSurvey()}),r}_openSurvey(){let e=document.querySelector(n);e||(e=document.createElement(n),document.body.appendChild(e)),e.open(),console.log("Survey trigger clicked:",this.uuid)}render(e,i){this.settings=i,this.uuid=e,this.$shadowRoot.empty(),this._ensureBaseStyle(),Breinify.plugins.webExperiences.style(this.settings,this.$shadowRoot);var i=u('<div class="br-ui-survey-root"></div>'),r=this._createTrigger();i.append(r),this.$shadowRoot.append(i),console.log(e),console.log(this.settings),console.log(JSON.stringify(this.settings))}}Breinify.plugins._add("uiSurvey",{register:function(e,i,r){window.customElements.get(n)||window.customElements.define(n,a),window.customElements.get(o)||window.customElements.define(o,d);var t="br-survey-"+i;let s=u("#"+t);0===s.length&&(s=u("<"+o+"/>").attr("id",t),!1===Breinify.plugins.webExperiences.attach(r,s))||s.get(0).render(i,r)}})}})();